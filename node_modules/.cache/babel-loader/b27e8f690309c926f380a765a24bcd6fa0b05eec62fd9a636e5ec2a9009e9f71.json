{"ast":null,"code":"import React,{useEffect,useMemo,useState}from\"react\";// ======= Jednoduchý PROTOTYP bez serveru =======\n// - Přihlášení přes lokální úložiště (NE bezpečné, jen demo)\n// - Zápis prodejů, přepočet bodů podle produktů\n// - Žebříček (leaderboard)\n// - Admin: správa uživatelů a bodových pravidel + Import/Export CSV/JSON\n//\n// Poznámka: Pro produkci doporučuji napojit na Supabase/Firebase (auth + databáze).\n// ================================================\n// --- Lokální klíče ---\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LS_KEYS={USERS:\"sales_game_users_v1\",ENTRIES:\"sales_game_entries_v1\",PRODUCTS:\"sales_game_products_v1\",SESSION:\"sales_game_session_v1\"};// --- Pomocné funkce ---\nconst uid=()=>Math.random().toString(36).slice(2)+Date.now().toString(36);const todayISO=()=>new Date().toISOString().slice(0,10);// --- Výchozí data (poprvé naplníme) ---\nconst DEFAULT_USERS=[{id:\"u-admin\",name:\"Admin\",email:\"admin@firma.cz\",role:\"admin\",password:\"admin\"},{id:\"u-oz1\",name:\"Jan Novák\",email:\"jan.novak@firma.cz\",role:\"user\",password:\"jan\"},{id:\"u-oz2\",name:\"Petra Veselá\",email:\"petra.vesela@firma.cz\",role:\"user\",password:\"petra\"}];const DEFAULT_PRODUCTS=[{id:\"p-tv-basic\",name:\"TV Basic\",basePoints:5},{id:\"p-tv-plus\",name:\"TV Plus\",basePoints:10},{id:\"p-tv-premium\",name:\"TV Premium\",basePoints:15},{id:\"p-internet\",name:\"Internet\",basePoints:8}];// ===== Komponenta: Přihlášení =====\nfunction Login(_ref){let{onLogin}=_ref;const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const[error,setError]=useState(\"\");const handleSubmit=e=>{e.preventDefault();const users=JSON.parse(localStorage.getItem(LS_KEYS.USERS)||\"[]\");const u=users.find(x=>x.email.trim().toLowerCase()===email.trim().toLowerCase()&&x.password===password);if(!u){setError(\"Nesprávný e‑mail nebo heslo.\");return;}localStorage.setItem(LS_KEYS.SESSION,JSON.stringify({userId:u.id}));onLogin(u);};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gray-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-md bg-white shadow-xl rounded-2xl p-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold mb-2\",children:\"Vstup do sout\\u011B\\u017Ee\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-6\",children:\"P\\u0159ihlaste se sv\\xFDm firemn\\xEDm e\\u2011mailem.\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"E\\u2011mail\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"w-full border rounded-xl px-3 py-2 focus:outline-none focus:ring\",value:email,onChange:e=>setEmail(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"Heslo\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"w-full border rounded-xl px-3 py-2 focus:outline-none focus:ring\",value:password,onChange:e=>setPassword(e.target.value),required:true})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600 text-sm\",children:error}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full bg-black text-white rounded-xl py-2 font-semibold hover:opacity-90\",children:\"P\\u0159ihl\\xE1sit se\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-400 mt-4\",children:\"Demo \\xFA\\u010Dty: admin@firma.cz / admin, jan.novak@firma.cz / jan, petra.vesela@firma.cz / petra\"})]})});}// ===== Panel: Zadat prodej =====\nfunction SalesEntry(_ref2){var _products$;let{user,products,onAddSale}=_ref2;const[productId,setProductId]=useState(((_products$=products[0])===null||_products$===void 0?void 0:_products$.id)||\"\");const[quantity,setQuantity]=useState(1);const[note,setNote]=useState(\"\");const[date,setDate]=useState(todayISO());const selected=useMemo(()=>products.find(p=>p.id===productId),[products,productId]);const computedPoints=useMemo(()=>selected?selected.basePoints*(Number(quantity)||0):0,[selected,quantity]);const submit=e=>{e.preventDefault();if(!selected)return;onAddSale({productId,quantity:Number(quantity),date,note,points:computedPoints});setQuantity(1);setNote(\"\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl p-5 shadow\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"Zadat prodej\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submit,className:\"grid md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"Produkt\"}),/*#__PURE__*/_jsx(\"select\",{className:\"w-full border rounded-xl px-3 py-2\",value:productId,onChange:e=>setProductId(e.target.value),children:products.map(p=>/*#__PURE__*/_jsxs(\"option\",{value:p.id,children:[p.name,\" ( \",p.basePoints,\" b )\"]},p.id))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"Datum\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"w-full border rounded-xl px-3 py-2\",value:date,onChange:e=>setDate(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"Po\\u010Det kus\\u016F\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:1,className:\"w-full border rounded-xl px-3 py-2\",value:quantity,onChange:e=>setQuantity(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"Pozn\\xE1mka\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u010D\\xEDslo smlouvy, bal\\xED\\u010Dek, \\u2026\",className:\"w-full border rounded-xl px-3 py-2\",value:note,onChange:e=>setNote(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2 flex items-center justify-between bg-gray-50 rounded-xl px-4 py-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"P\\u0159id\\u011Blen\\xE9 body\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-lg font-bold\",children:[computedPoints,\" b\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"md:col-span-2\",children:/*#__PURE__*/_jsx(\"button\",{className:\"w-full md:w-auto bg-black text-white rounded-xl px-5 py-2 font-semibold hover:opacity-90\",children:\"Ulo\\u017Eit prodej\"})})]})]});}// ===== Panel: Moje prodeje =====\nfunction MySales(_ref3){let{user,entries,products}=_ref3;const my=entries.filter(e=>e.userId===user.id).sort((a,b)=>b.createdAt-a.createdAt);const productMap=Object.fromEntries(products.map(p=>[p.id,p]));return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl p-5 shadow\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"Moje prodeje\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"text-left text-gray-600\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"p-2\",children:\"Datum\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-2\",children:\"Produkt\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-2\",children:\"Ks\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-2\",children:\"Pozn\\xE1mka\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-2\",children:\"Body\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[my.map(e=>{var _productMap$e$product;return/*#__PURE__*/_jsxs(\"tr\",{className:\"border-t\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"p-2\",children:e.date}),/*#__PURE__*/_jsx(\"td\",{className:\"p-2\",children:((_productMap$e$product=productMap[e.productId])===null||_productMap$e$product===void 0?void 0:_productMap$e$product.name)||e.productId}),/*#__PURE__*/_jsx(\"td\",{className:\"p-2\",children:e.quantity}),/*#__PURE__*/_jsx(\"td\",{className:\"p-2\",children:e.note}),/*#__PURE__*/_jsx(\"td\",{className:\"p-2 font-semibold\",children:e.points})]},e.id);}),my.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{className:\"p-3 text-gray-500\",colSpan:5,children:\"Zat\\xEDm \\u017E\\xE1dn\\xE9 z\\xE1znamy.\"})})]})]})})]});}// ===== Import/Export utility funkce =====\nfunction parseCSV(text){const lines=text.trim().split(/\\r?\\n/);const headers=lines.shift().split(',').map(h=>h.trim());return lines.map(line=>{const cols=line.split(',');const obj={};headers.forEach((h,i)=>{obj[h]=(cols[i]||'').trim();});return obj;});}function downloadJSON(filename,data){const blob=new Blob([JSON.stringify(data,null,2)],{type:'application/json'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=filename;a.click();URL.revokeObjectURL(url);}function toCSV(arr,headers){const head=headers.join(',');const body=arr.map(o=>headers.map(h=>{var _o$h;return(_o$h=o[h])!==null&&_o$h!==void 0?_o$h:'';}).join(',')).join('\\n');return head+'\\n'+body;}function downloadCSV(filename,data,headers){const blob=new Blob([toCSV(data,headers)],{type:'text/csv;charset=utf-8;'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=filename;a.click();URL.revokeObjectURL(url);}// ===== Panel: Admin =====\nfunction AdminPanel(_ref4){let{users,setUsers,products,setProducts}=_ref4;// Správa uživatelů\nconst[uName,setUName]=useState(\"\");const[uEmail,setUEmail]=useState(\"\");const[uPass,setUPass]=useState(\"\");// Správa produktů\nconst[pName,setPName]=useState(\"\");const[pPoints,setPPoints]=useState(10);// === Hromadný import ===\nconst importUsersFromFile=async file=>{const text=await file.text();let arr;if(file.name.endsWith('.json')){arr=JSON.parse(text);}else{arr=parseCSV(text);}// očekávané sloupce: name,email,password,role (volitelně id)\nconst cleaned=arr.map(r=>{var _r$id;return{id:((_r$id=r.id)===null||_r$id===void 0?void 0:_r$id.trim())||uid(),name:(r.name||'').trim(),email:(r.email||'').trim().toLowerCase(),role:(r.role||'user').trim(),password:(r.password||'').trim()};}).filter(x=>x.name&&x.email&&x.password);setUsers(prev=>{const byEmail=new Map(prev.map(u=>[u.email.toLowerCase(),u]));cleaned.forEach(u=>{byEmail.set(u.email.toLowerCase(),u);});const next=Array.from(byEmail.values());localStorage.setItem(LS_KEYS.USERS,JSON.stringify(next));return next;});};const importProductsFromFile=async file=>{const text=await file.text();let arr;if(file.name.endsWith('.json')){arr=JSON.parse(text);}else{arr=parseCSV(text);}// sloupce: name,basePoints (volitelně id)\nconst cleaned=arr.map(r=>{var _r$id2;return{id:((_r$id2=r.id)===null||_r$id2===void 0?void 0:_r$id2.trim())||uid(),name:(r.name||'').trim(),basePoints:Number(r.basePoints||r.points||0)||0};}).filter(x=>x.name);setProducts(prev=>{const byName=new Map(prev.map(p=>[p.name.toLowerCase(),p]));cleaned.forEach(p=>{byName.set(p.name.toLowerCase(),p);});const next=Array.from(byName.values());localStorage.setItem(LS_KEYS.PRODUCTS,JSON.stringify(next));return next;});};// === Export ===\nconst exportUsers=()=>downloadJSON('users.json',users);const exportUsersCSV=()=>downloadCSV('users.csv',users,['id','name','email','role','password']);const exportProducts=()=>downloadJSON('products.json',products);const exportProductsCSV=()=>downloadCSV('products.csv',products,['id','name','basePoints']);const addUser=e=>{e.preventDefault();const newUser={id:uid(),name:uName.trim(),email:uEmail.trim().toLowerCase(),role:\"user\",password:uPass};if(!newUser.name||!newUser.email||!newUser.password)return;setUsers(prev=>{const next=[...prev,newUser];localStorage.setItem(LS_KEYS.USERS,JSON.stringify(next));return next;});setUName(\"\");setUEmail(\"\");setUPass(\"\");};const addProduct=e=>{e.preventDefault();const newProduct={id:uid(),name:pName.trim(),basePoints:Number(pPoints)||0};if(!newProduct.name)return;setProducts(prev=>{const next=[...prev,newProduct];localStorage.setItem(LS_KEYS.PRODUCTS,JSON.stringify(next));return next;});setPName(\"\");setPPoints(10);};const removeUser=id=>{setUsers(prev=>{const next=prev.filter(u=>u.id!==id);localStorage.setItem(LS_KEYS.USERS,JSON.stringify(next));return next;});};const removeProduct=id=>{setProducts(prev=>{const next=prev.filter(p=>p.id!==id);localStorage.setItem(LS_KEYS.PRODUCTS,JSON.stringify(next));return next;});};return/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl p-5 shadow\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"U\\u017Eivatel\\xE9\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:addUser,className:\"grid grid-cols-1 gap-3 mb-4\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"border rounded-xl px-3 py-2\",placeholder:\"Jm\\xE9no a p\\u0159\\xEDjmen\\xED\",value:uName,onChange:e=>setUName(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{className:\"border rounded-xl px-3 py-2\",placeholder:\"E\\u2011mail\",value:uEmail,onChange:e=>setUEmail(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{className:\"border rounded-xl px-3 py-2\",placeholder:\"Do\\u010Dasn\\xE9 heslo\",value:uPass,onChange:e=>setUPass(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-black text-white rounded-xl px-4 py-2 w-full md:w-auto\",children:\"P\\u0159idat u\\u017Eivatele\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-2 mb-3\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"text-sm\",children:[\"Import (CSV/JSON): \",/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".csv,.json\",onChange:e=>e.target.files[0]&&importUsersFromFile(e.target.files[0])})]}),/*#__PURE__*/_jsx(\"button\",{onClick:exportUsers,className:\"text-sm underline\",children:\"Export JSON\"}),/*#__PURE__*/_jsx(\"button\",{onClick:exportUsersCSV,className:\"text-sm underline\",children:\"Export CSV\"})]}),/*#__PURE__*/_jsx(\"ul\",{className:\"divide-y\",children:users.map(u=>/*#__PURE__*/_jsxs(\"li\",{className:\"py-2 flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:u.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500\",children:[u.email,\" \\u2022 role: \",u.role]})]}),u.role!==\"admin\"&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeUser(u.id),className:\"text-red-600 text-sm hover:underline\",children:\"Smazat\"})]},u.id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl p-5 shadow\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"Produkty & body\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:addProduct,className:\"grid grid-cols-1 gap-3 mb-4\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"border rounded-xl px-3 py-2\",placeholder:\"N\\xE1zev produktu\",value:pName,onChange:e=>setPName(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"border rounded-xl px-3 py-2\",placeholder:\"Body za kus\",value:pPoints,onChange:e=>setPPoints(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-black text-white rounded-xl px-4 py-2 w-full md:w-auto\",children:\"P\\u0159idat produkt\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-2 mb-3\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"text-sm\",children:[\"Import (CSV/JSON): \",/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".csv,.json\",onChange:e=>e.target.files[0]&&importProductsFromFile(e.target.files[0])})]}),/*#__PURE__*/_jsx(\"button\",{onClick:exportProducts,className:\"text-sm underline\",children:\"Export JSON\"}),/*#__PURE__*/_jsx(\"button\",{onClick:exportProductsCSV,className:\"text-sm underline\",children:\"Export CSV\"})]}),/*#__PURE__*/_jsx(\"ul\",{className:\"divide-y\",children:products.map(p=>/*#__PURE__*/_jsxs(\"li\",{className:\"py-2 flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:p.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500\",children:[p.basePoints,\" bod\\u016F / ks\"]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeProduct(p.id),className:\"text-red-600 text-sm hover:underline\",children:\"Smazat\"})]},p.id))})]})]});}// ===== Hlavní aplikace =====\nexport default function SalesGameApp(){const[session,setSession]=useState(null);// { userId }\nconst[me,setMe]=useState(null);// celý objekt uživatele\nconst[users,setUsers]=useState([]);const[products,setProducts]=useState([]);const[entries,setEntries]=useState([]);const[tab,setTab]=useState(\"leaderboard\");// Init demo dat při prvním spuštění\nuseEffect(()=>{const uRaw=localStorage.getItem(LS_KEYS.USERS);const pRaw=localStorage.getItem(LS_KEYS.PRODUCTS);const eRaw=localStorage.getItem(LS_KEYS.ENTRIES);if(!uRaw)localStorage.setItem(LS_KEYS.USERS,JSON.stringify(DEFAULT_USERS));if(!pRaw)localStorage.setItem(LS_KEYS.PRODUCTS,JSON.stringify(DEFAULT_PRODUCTS));if(!eRaw)localStorage.setItem(LS_KEYS.ENTRIES,JSON.stringify([]));setUsers(JSON.parse(localStorage.getItem(LS_KEYS.USERS)||\"[]\"));setProducts(JSON.parse(localStorage.getItem(LS_KEYS.PRODUCTS)||\"[]\"));setEntries(JSON.parse(localStorage.getItem(LS_KEYS.ENTRIES)||\"[]\"));const sRaw=localStorage.getItem(LS_KEYS.SESSION);if(sRaw)setSession(JSON.parse(sRaw));},[]);// Při změně session nastavíme me\nuseEffect(()=>{if(!session){setMe(null);return;}const u=users.find(x=>x.id===session.userId)||null;setMe(u);},[session,users]);const handleLogout=()=>{localStorage.removeItem(LS_KEYS.SESSION);setSession(null);};const addSale=_ref5=>{let{productId,quantity,date,note,points}=_ref5;if(!me)return;const newEntry={id:uid(),userId:me.id,productId,quantity,date,note,points,createdAt:Date.now()};setEntries(prev=>{const next=[newEntry,...prev];localStorage.setItem(LS_KEYS.ENTRIES,JSON.stringify(next));return next;});setTab(\"leaderboard\");};if(!me){return/*#__PURE__*/_jsx(Login,{onLogin:()=>setSession(JSON.parse(localStorage.getItem(LS_KEYS.SESSION)))});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-100\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"bg-white sticky top-0 z-10 shadow-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-6xl mx-auto px-4 py-3 flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 rounded-xl bg-black text-white flex items-center justify-center font-bold\",children:\"OZ\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"font-bold\",children:\"Bodov\\xE1 sout\\u011B\\u017E\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-600\",children:[me.name,\" (\",me.role,\")\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"text-sm text-gray-500 hover:underline\",children:\"Odhl\\xE1sit\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-6xl mx-auto px-4 mt-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2 mb-4\",children:[{id:\"entry\",label:\"Zadat prodej\"},{id:\"mysales\",label:\"Moje prodeje\"},{id:\"leaderboard\",label:\"Žebříček\"},...(me.role===\"admin\"?[{id:\"admin\",label:\"Admin\"}]:[])].map(t=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setTab(t.id),className:\"px-4 py-2 rounded-xl text-sm font-medium border \".concat(tab===t.id?\"bg-black text-white\":\"bg-white hover:bg-gray-50\"),children:t.label},t.id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6 pb-12\",children:[tab===\"entry\"&&/*#__PURE__*/_jsx(SalesEntry,{user:me,products:products,onAddSale:addSale}),tab===\"mysales\"&&/*#__PURE__*/_jsx(MySales,{user:me,entries:entries,products:products}),tab===\"leaderboard\"&&/*#__PURE__*/_jsx(Leaderboard,{users:users,entries:entries,currentUserId:me.id}),tab===\"admin\"&&me.role===\"admin\"&&/*#__PURE__*/_jsx(AdminPanel,{users:users,setUsers:setUsers,products:products,setProducts:setProducts})]})]}),/*#__PURE__*/_jsx(\"footer\",{className:\"text-center text-xs text-gray-400 py-6\",children:\"Prototyp bez serveru \\u2022 pro produkci napojte Auth + DB\"})]});}// ===== Žebříček (Leaderboard) =====\nfunction Leaderboard(_ref6){let{users,entries,currentUserId}=_ref6;const totals=React.useMemo(()=>{const map=new Map();for(const e of entries)map.set(e.userId,(map.get(e.userId)||0)+e.points);const arr=users.map(u=>({user:u,points:map.get(u.id)||0}));arr.sort((a,b)=>b.points-a.points||a.user.name.localeCompare(b.user.name));return arr;},[users,entries]);return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl p-5 shadow\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"\\u017Deb\\u0159\\xED\\u010Dek\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"text-left text-gray-600\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"p-2\",children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-2\",children:\"Obchodn\\xEDk\"}),/*#__PURE__*/_jsx(\"th\",{className:\"p-2\",children:\"Body\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:totals.map((row,idx)=>{const isMe=row.user.id===currentUserId;return/*#__PURE__*/_jsxs(\"tr\",{className:\"border-t \".concat(isMe?\"bg-green-50\":\"\"),children:[/*#__PURE__*/_jsx(\"td\",{className:\"p-2 font-semibold\",children:idx+1}),/*#__PURE__*/_jsxs(\"td\",{className:\"p-2\",children:[row.user.name,isMe&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-xs px-2 py-0.5 rounded-full bg-green-100 text-green-700 align-middle\",children:\"vy jste tady\"})]}),/*#__PURE__*/_jsx(\"td\",{className:\"p-2 font-bold\",children:row.points})]},row.user.id);})})]})})]});}","map":{"version":3,"names":["React","useEffect","useMemo","useState","jsx","_jsx","jsxs","_jsxs","LS_KEYS","USERS","ENTRIES","PRODUCTS","SESSION","uid","Math","random","toString","slice","Date","now","todayISO","toISOString","DEFAULT_USERS","id","name","email","role","password","DEFAULT_PRODUCTS","basePoints","Login","_ref","onLogin","setEmail","setPassword","error","setError","handleSubmit","e","preventDefault","users","JSON","parse","localStorage","getItem","u","find","x","trim","toLowerCase","setItem","stringify","userId","className","children","onSubmit","type","value","onChange","target","required","SalesEntry","_ref2","_products$","user","products","onAddSale","productId","setProductId","quantity","setQuantity","note","setNote","date","setDate","selected","p","computedPoints","Number","submit","points","map","min","placeholder","MySales","_ref3","entries","my","filter","sort","a","b","createdAt","productMap","Object","fromEntries","_productMap$e$product","length","colSpan","parseCSV","text","lines","split","headers","shift","h","line","cols","obj","forEach","i","downloadJSON","filename","data","blob","Blob","url","URL","createObjectURL","document","createElement","href","download","click","revokeObjectURL","toCSV","arr","head","join","body","o","_o$h","downloadCSV","AdminPanel","_ref4","setUsers","setProducts","uName","setUName","uEmail","setUEmail","uPass","setUPass","pName","setPName","pPoints","setPPoints","importUsersFromFile","file","endsWith","cleaned","r","_r$id","prev","byEmail","Map","set","next","Array","from","values","importProductsFromFile","_r$id2","byName","exportUsers","exportUsersCSV","exportProducts","exportProductsCSV","addUser","newUser","addProduct","newProduct","removeUser","removeProduct","accept","files","onClick","SalesGameApp","session","setSession","me","setMe","setEntries","tab","setTab","uRaw","pRaw","eRaw","sRaw","handleLogout","removeItem","addSale","_ref5","newEntry","label","t","concat","Leaderboard","currentUserId","_ref6","totals","get","localeCompare","row","idx","isMe"],"sources":["C:/Users/micha/OneDrive/Desktop/sales-game-template/src/App.js"],"sourcesContent":["import React, { useEffect, useMemo, useState } from \"react\";\n\n// ======= Jednoduchý PROTOTYP bez serveru =======\n// - Přihlášení přes lokální úložiště (NE bezpečné, jen demo)\n// - Zápis prodejů, přepočet bodů podle produktů\n// - Žebříček (leaderboard)\n// - Admin: správa uživatelů a bodových pravidel + Import/Export CSV/JSON\n//\n// Poznámka: Pro produkci doporučuji napojit na Supabase/Firebase (auth + databáze).\n// ================================================\n\n// --- Lokální klíče ---\nconst LS_KEYS = {\n  USERS: \"sales_game_users_v1\",\n  ENTRIES: \"sales_game_entries_v1\",\n  PRODUCTS: \"sales_game_products_v1\",\n  SESSION: \"sales_game_session_v1\",\n};\n\n// --- Pomocné funkce ---\nconst uid = () => Math.random().toString(36).slice(2) + Date.now().toString(36);\nconst todayISO = () => new Date().toISOString().slice(0, 10);\n\n// --- Výchozí data (poprvé naplníme) ---\nconst DEFAULT_USERS = [\n  { id: \"u-admin\", name: \"Admin\", email: \"admin@firma.cz\", role: \"admin\", password: \"admin\" },\n  { id: \"u-oz1\", name: \"Jan Novák\", email: \"jan.novak@firma.cz\", role: \"user\", password: \"jan\" },\n  { id: \"u-oz2\", name: \"Petra Veselá\", email: \"petra.vesela@firma.cz\", role: \"user\", password: \"petra\" },\n];\n\nconst DEFAULT_PRODUCTS = [\n  { id: \"p-tv-basic\", name: \"TV Basic\", basePoints: 5 },\n  { id: \"p-tv-plus\", name: \"TV Plus\", basePoints: 10 },\n  { id: \"p-tv-premium\", name: \"TV Premium\", basePoints: 15 },\n  { id: \"p-internet\", name: \"Internet\", basePoints: 8 },\n];\n\n// ===== Komponenta: Přihlášení =====\nfunction Login({ onLogin }) {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const users = JSON.parse(localStorage.getItem(LS_KEYS.USERS) || \"[]\");\n    const u = users.find(\n      (x) => x.email.trim().toLowerCase() === email.trim().toLowerCase() && x.password === password\n    );\n    if (!u) {\n      setError(\"Nesprávný e‑mail nebo heslo.\");\n      return;\n    }\n    localStorage.setItem(LS_KEYS.SESSION, JSON.stringify({ userId: u.id }));\n    onLogin(u);\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-50 p-4\">\n      <div className=\"w-full max-w-md bg-white shadow-xl rounded-2xl p-6\">\n        <h1 className=\"text-2xl font-bold mb-2\">Vstup do soutěže</h1>\n        <p className=\"text-gray-500 mb-6\">Přihlaste se svým firemním e‑mailem.</p>\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">E‑mail</label>\n            <input\n              type=\"email\"\n              className=\"w-full border rounded-xl px-3 py-2 focus:outline-none focus:ring\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              required\n            />\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Heslo</label>\n            <input\n              type=\"password\"\n              className=\"w-full border rounded-xl px-3 py-2 focus:outline-none focus:ring\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              required\n            />\n          </div>\n          {error && <p className=\"text-red-600 text-sm\">{error}</p>}\n          <button\n            type=\"submit\"\n            className=\"w-full bg-black text-white rounded-xl py-2 font-semibold hover:opacity-90\"\n          >\n            Přihlásit se\n          </button>\n        </form>\n        <p className=\"text-xs text-gray-400 mt-4\">Demo účty: admin@firma.cz / admin, jan.novak@firma.cz / jan, petra.vesela@firma.cz / petra</p>\n      </div>\n    </div>\n  );\n}\n\n// ===== Panel: Zadat prodej =====\nfunction SalesEntry({ user, products, onAddSale }) {\n  const [productId, setProductId] = useState(products[0]?.id || \"\");\n  const [quantity, setQuantity] = useState(1);\n  const [note, setNote] = useState(\"\");\n  const [date, setDate] = useState(todayISO());\n\n  const selected = useMemo(() => products.find((p) => p.id === productId), [products, productId]);\n  const computedPoints = useMemo(() => (selected ? selected.basePoints * (Number(quantity) || 0) : 0), [selected, quantity]);\n\n  const submit = (e) => {\n    e.preventDefault();\n    if (!selected) return;\n    onAddSale({ productId, quantity: Number(quantity), date, note, points: computedPoints });\n    setQuantity(1);\n    setNote(\"\");\n  };\n\n  return (\n    <div className=\"bg-white rounded-2xl p-5 shadow\">\n      <h2 className=\"text-xl font-semibold mb-4\">Zadat prodej</h2>\n      <form onSubmit={submit} className=\"grid md:grid-cols-2 gap-4\">\n        <div>\n          <label className=\"block text-sm font-medium mb-1\">Produkt</label>\n          <select\n            className=\"w-full border rounded-xl px-3 py-2\"\n            value={productId}\n            onChange={(e) => setProductId(e.target.value)}\n          >\n            {products.map((p) => (\n              <option key={p.id} value={p.id}>\n                {p.name} ( {p.basePoints} b )\n              </option>\n            ))}\n          </select>\n        </div>\n        <div>\n          <label className=\"block text-sm font-medium mb-1\">Datum</label>\n          <input\n            type=\"date\"\n            className=\"w-full border rounded-xl px-3 py-2\"\n            value={date}\n            onChange={(e) => setDate(e.target.value)}\n          />\n        </div>\n        <div>\n          <label className=\"block text-sm font-medium mb-1\">Počet kusů</label>\n          <input\n            type=\"number\"\n            min={1}\n            className=\"w-full border rounded-xl px-3 py-2\"\n            value={quantity}\n            onChange={(e) => setQuantity(e.target.value)}\n          />\n        </div>\n        <div>\n          <label className=\"block text-sm font-medium mb-1\">Poznámka</label>\n          <input\n            type=\"text\"\n            placeholder=\"číslo smlouvy, balíček, …\"\n            className=\"w-full border rounded-xl px-3 py-2\"\n            value={note}\n            onChange={(e) => setNote(e.target.value)}\n          />\n        </div>\n        <div className=\"md:col-span-2 flex items-center justify-between bg-gray-50 rounded-xl px-4 py-3\">\n          <span className=\"text-sm text-gray-600\">Přidělené body</span>\n          <span className=\"text-lg font-bold\">{computedPoints} b</span>\n        </div>\n        <div className=\"md:col-span-2\">\n          <button className=\"w-full md:w-auto bg-black text-white rounded-xl px-5 py-2 font-semibold hover:opacity-90\">\n            Uložit prodej\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n}\n\n// ===== Panel: Moje prodeje =====\nfunction MySales({ user, entries, products }) {\n  const my = entries.filter((e) => e.userId === user.id).sort((a, b) => b.createdAt - a.createdAt);\n  const productMap = Object.fromEntries(products.map((p) => [p.id, p]));\n\n  return (\n    <div className=\"bg-white rounded-2xl p-5 shadow\">\n      <h2 className=\"text-xl font-semibold mb-4\">Moje prodeje</h2>\n      <div className=\"overflow-x-auto\">\n        <table className=\"min-w-full text-sm\">\n          <thead>\n            <tr className=\"text-left text-gray-600\">\n              <th className=\"p-2\">Datum</th>\n              <th className=\"p-2\">Produkt</th>\n              <th className=\"p-2\">Ks</th>\n              <th className=\"p-2\">Poznámka</th>\n              <th className=\"p-2\">Body</th>\n            </tr>\n          </thead>\n          <tbody>\n            {my.map((e) => (\n              <tr key={e.id} className=\"border-t\">\n                <td className=\"p-2\">{e.date}</td>\n                <td className=\"p-2\">{productMap[e.productId]?.name || e.productId}</td>\n                <td className=\"p-2\">{e.quantity}</td>\n                <td className=\"p-2\">{e.note}</td>\n                <td className=\"p-2 font-semibold\">{e.points}</td>\n              </tr>\n            ))}\n            {my.length === 0 && (\n              <tr>\n                <td className=\"p-3 text-gray-500\" colSpan={5}>Zatím žádné záznamy.</td>\n              </tr>\n            )}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n}\n\n// ===== Import/Export utility funkce =====\nfunction parseCSV(text) {\n  const lines = text.trim().split(/\\r?\\n/);\n  const headers = lines.shift().split(',').map(h => h.trim());\n  return lines.map(line => {\n    const cols = line.split(',');\n    const obj = {};\n    headers.forEach((h, i) => { obj[h] = (cols[i] || '').trim(); });\n    return obj;\n  });\n}\nfunction downloadJSON(filename, data) {\n  const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });\n  const url = URL.createObjectURL(blob);\n  const a = document.createElement('a');\n  a.href = url; a.download = filename; a.click();\n  URL.revokeObjectURL(url);\n}\nfunction toCSV(arr, headers) {\n  const head = headers.join(',');\n  const body = arr.map(o => headers.map(h => (o[h] ?? '')).join(',')).join('\\n');\n  return head + '\\n' + body;\n}\nfunction downloadCSV(filename, data, headers) {\n  const blob = new Blob([toCSV(data, headers)], { type: 'text/csv;charset=utf-8;' });\n  const url = URL.createObjectURL(blob);\n  const a = document.createElement('a');\n  a.href = url; a.download = filename; a.click();\n  URL.revokeObjectURL(url);\n}\n\n// ===== Panel: Admin =====\nfunction AdminPanel({ users, setUsers, products, setProducts }) {\n  // Správa uživatelů\n  const [uName, setUName] = useState(\"\");\n  const [uEmail, setUEmail] = useState(\"\");\n  const [uPass, setUPass] = useState(\"\");\n\n  // Správa produktů\n  const [pName, setPName] = useState(\"\");\n  const [pPoints, setPPoints] = useState(10);\n\n  // === Hromadný import ===\n  const importUsersFromFile = async (file) => {\n    const text = await file.text();\n    let arr;\n    if (file.name.endsWith('.json')) {\n      arr = JSON.parse(text);\n    } else {\n      arr = parseCSV(text);\n    }\n    // očekávané sloupce: name,email,password,role (volitelně id)\n    const cleaned = arr.map((r) => ({\n      id: r.id?.trim() || uid(),\n      name: (r.name || '').trim(),\n      email: (r.email || '').trim().toLowerCase(),\n      role: (r.role || 'user').trim(),\n      password: (r.password || '').trim(),\n    })).filter(x => x.name && x.email && x.password);\n\n    setUsers((prev) => {\n      const byEmail = new Map(prev.map(u => [u.email.toLowerCase(), u]));\n      cleaned.forEach(u => { byEmail.set(u.email.toLowerCase(), u); });\n      const next = Array.from(byEmail.values());\n      localStorage.setItem(LS_KEYS.USERS, JSON.stringify(next));\n      return next;\n    });\n  };\n\n  const importProductsFromFile = async (file) => {\n    const text = await file.text();\n    let arr;\n    if (file.name.endsWith('.json')) {\n      arr = JSON.parse(text);\n    } else {\n      arr = parseCSV(text);\n    }\n    // sloupce: name,basePoints (volitelně id)\n    const cleaned = arr.map((r) => ({\n      id: r.id?.trim() || uid(),\n      name: (r.name || '').trim(),\n      basePoints: Number(r.basePoints || r.points || 0) || 0,\n    })).filter(x => x.name);\n\n    setProducts((prev) => {\n      const byName = new Map(prev.map(p => [p.name.toLowerCase(), p]));\n      cleaned.forEach(p => { byName.set(p.name.toLowerCase(), p); });\n      const next = Array.from(byName.values());\n      localStorage.setItem(LS_KEYS.PRODUCTS, JSON.stringify(next));\n      return next;\n    });\n  };\n\n  // === Export ===\n  const exportUsers = () => downloadJSON('users.json', users);\n  const exportUsersCSV = () => downloadCSV('users.csv', users, ['id','name','email','role','password']);\n  const exportProducts = () => downloadJSON('products.json', products);\n  const exportProductsCSV = () => downloadCSV('products.csv', products, ['id','name','basePoints']);\n\n  const addUser = (e) => {\n    e.preventDefault();\n    const newUser = { id: uid(), name: uName.trim(), email: uEmail.trim().toLowerCase(), role: \"user\", password: uPass };\n    if (!newUser.name || !newUser.email || !newUser.password) return;\n    setUsers((prev) => {\n      const next = [...prev, newUser];\n      localStorage.setItem(LS_KEYS.USERS, JSON.stringify(next));\n      return next;\n    });\n    setUName(\"\"); setUEmail(\"\"); setUPass(\"\");\n  };\n\n  const addProduct = (e) => {\n    e.preventDefault();\n    const newProduct = { id: uid(), name: pName.trim(), basePoints: Number(pPoints) || 0 };\n    if (!newProduct.name) return;\n    setProducts((prev) => {\n      const next = [...prev, newProduct];\n      localStorage.setItem(LS_KEYS.PRODUCTS, JSON.stringify(next));\n      return next;\n    });\n    setPName(\"\"); setPPoints(10);\n  };\n\n  const removeUser = (id) => {\n    setUsers((prev) => {\n      const next = prev.filter((u) => u.id !== id);\n      localStorage.setItem(LS_KEYS.USERS, JSON.stringify(next));\n      return next;\n    });\n  };\n\n  const removeProduct = (id) => {\n    setProducts((prev) => {\n      const next = prev.filter((p) => p.id !== id);\n      localStorage.setItem(LS_KEYS.PRODUCTS, JSON.stringify(next));\n      return next;\n    });\n  };\n\n  return (\n    <div className=\"grid md:grid-cols-2 gap-6\">\n      <div className=\"bg-white rounded-2xl p-5 shadow\">\n        <h3 className=\"text-lg font-semibold mb-4\">Uživatelé</h3>\n        <form onSubmit={addUser} className=\"grid grid-cols-1 gap-3 mb-4\">\n          <input className=\"border rounded-xl px-3 py-2\" placeholder=\"Jméno a příjmení\" value={uName} onChange={(e) => setUName(e.target.value)} />\n          <input className=\"border rounded-xl px-3 py-2\" placeholder=\"E‑mail\" value={uEmail} onChange={(e) => setUEmail(e.target.value)} />\n          <input className=\"border rounded-xl px-3 py-2\" placeholder=\"Dočasné heslo\" value={uPass} onChange={(e) => setUPass(e.target.value)} />\n          <button className=\"bg-black text-white rounded-xl px-4 py-2 w-full md:w-auto\">Přidat uživatele</button>\n        </form>\n        <div className=\"flex flex-wrap gap-2 mb-3\">\n          <label className=\"text-sm\">Import (CSV/JSON): <input type=\"file\" accept=\".csv,.json\" onChange={(e)=> e.target.files[0] && importUsersFromFile(e.target.files[0])} /></label>\n          <button onClick={exportUsers} className=\"text-sm underline\">Export JSON</button>\n          <button onClick={exportUsersCSV} className=\"text-sm underline\">Export CSV</button>\n        </div>\n        <ul className=\"divide-y\">\n          {users.map((u) => (\n            <li key={u.id} className=\"py-2 flex items-center justify-between\">\n              <div>\n                <p className=\"font-medium\">{u.name}</p>\n                <p className=\"text-xs text-gray-500\">{u.email} • role: {u.role}</p>\n              </div>\n              {u.role !== \"admin\" && (\n                <button onClick={() => removeUser(u.id)} className=\"text-red-600 text-sm hover:underline\">Smazat</button>\n              )}\n            </li>\n          ))}\n        </ul>\n      </div>\n\n      <div className=\"bg-white rounded-2xl p-5 shadow\">\n        <h3 className=\"text-lg font-semibold mb-4\">Produkty & body</h3>\n        <form onSubmit={addProduct} className=\"grid grid-cols-1 gap-3 mb-4\">\n          <input className=\"border rounded-xl px-3 py-2\" placeholder=\"Název produktu\" value={pName} onChange={(e) => setPName(e.target.value)} />\n          <input type=\"number\" className=\"border rounded-xl px-3 py-2\" placeholder=\"Body za kus\" value={pPoints} onChange={(e) => setPPoints(e.target.value)} />\n          <button className=\"bg-black text-white rounded-xl px-4 py-2 w-full md:w-auto\">Přidat produkt</button>\n        </form>\n        <div className=\"flex flex-wrap gap-2 mb-3\">\n          <label className=\"text-sm\">Import (CSV/JSON): <input type=\"file\" accept=\".csv,.json\" onChange={(e)=> e.target.files[0] && importProductsFromFile(e.target.files[0])} /></label>\n          <button onClick={exportProducts} className=\"text-sm underline\">Export JSON</button>\n          <button onClick={exportProductsCSV} className=\"text-sm underline\">Export CSV</button>\n        </div>\n        <ul className=\"divide-y\">\n          {products.map((p) => (\n            <li key={p.id} className=\"py-2 flex items-center justify-between\">\n              <div>\n                <p className=\"font-medium\">{p.name}</p>\n                <p className=\"text-xs text-gray-500\">{p.basePoints} bodů / ks</p>\n              </div>\n              <button onClick={() => removeProduct(p.id)} className=\"text-red-600 text-sm hover:underline\">Smazat</button>\n            </li>\n          ))}\n        </ul>\n      </div>\n    </div>\n  );\n}\n\n// ===== Hlavní aplikace =====\nexport default function SalesGameApp() {\n  const [session, setSession] = useState(null); // { userId }\n  const [me, setMe] = useState(null); // celý objekt uživatele\n  const [users, setUsers] = useState([]);\n  const [products, setProducts] = useState([]);\n  const [entries, setEntries] = useState([]);\n  const [tab, setTab] = useState(\"leaderboard\");\n\n  // Init demo dat při prvním spuštění\n  useEffect(() => {\n    const uRaw = localStorage.getItem(LS_KEYS.USERS);\n    const pRaw = localStorage.getItem(LS_KEYS.PRODUCTS);\n    const eRaw = localStorage.getItem(LS_KEYS.ENTRIES);\n    if (!uRaw) localStorage.setItem(LS_KEYS.USERS, JSON.stringify(DEFAULT_USERS));\n    if (!pRaw) localStorage.setItem(LS_KEYS.PRODUCTS, JSON.stringify(DEFAULT_PRODUCTS));\n    if (!eRaw) localStorage.setItem(LS_KEYS.ENTRIES, JSON.stringify([]));\n\n    setUsers(JSON.parse(localStorage.getItem(LS_KEYS.USERS) || \"[]\"));\n    setProducts(JSON.parse(localStorage.getItem(LS_KEYS.PRODUCTS) || \"[]\"));\n    setEntries(JSON.parse(localStorage.getItem(LS_KEYS.ENTRIES) || \"[]\"));\n\n    const sRaw = localStorage.getItem(LS_KEYS.SESSION);\n    if (sRaw) setSession(JSON.parse(sRaw));\n  }, []);\n\n  // Při změně session nastavíme me\n  useEffect(() => {\n    if (!session) { setMe(null); return; }\n    const u = users.find((x) => x.id === session.userId) || null;\n    setMe(u);\n  }, [session, users]);\n\n  const handleLogout = () => {\n    localStorage.removeItem(LS_KEYS.SESSION);\n    setSession(null);\n  };\n\n  const addSale = ({ productId, quantity, date, note, points }) => {\n    if (!me) return;\n    const newEntry = {\n      id: uid(),\n      userId: me.id,\n      productId,\n      quantity,\n      date,\n      note,\n      points,\n      createdAt: Date.now(),\n    };\n    setEntries((prev) => {\n      const next = [newEntry, ...prev];\n      localStorage.setItem(LS_KEYS.ENTRIES, JSON.stringify(next));\n      return next;\n    });\n    setTab(\"leaderboard\");\n  };\n\n  if (!me) {\n    return <Login onLogin={() => setSession(JSON.parse(localStorage.getItem(LS_KEYS.SESSION)))} />;\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-100\">\n      {/* Header */}\n      <header className=\"bg-white sticky top-0 z-10 shadow-sm\">\n        <div className=\"max-w-6xl mx-auto px-4 py-3 flex items-center justify-between\">\n          <div className=\"flex items-center gap-2\">\n            <div className=\"w-8 h-8 rounded-xl bg-black text-white flex items-center justify-center font-bold\">OZ</div>\n            <h1 className=\"font-bold\">Bodová soutěž</h1>\n          </div>\n          <div className=\"flex items-center gap-3\">\n            <span className=\"text-sm text-gray-600\">{me.name} ({me.role})</span>\n            <button onClick={handleLogout} className=\"text-sm text-gray-500 hover:underline\">Odhlásit</button>\n          </div>\n        </div>\n      </header>\n\n      {/* Tabs */}\n      <div className=\"max-w-6xl mx-auto px-4 mt-6\">\n        <div className=\"flex flex-wrap gap-2 mb-4\">\n          {[\n            { id: \"entry\", label: \"Zadat prodej\" },\n            { id: \"mysales\", label: \"Moje prodeje\" },\n            { id: \"leaderboard\", label: \"Žebříček\" },\n            ...(me.role === \"admin\" ? [{ id: \"admin\", label: \"Admin\" }] : []),\n          ].map((t) => (\n            <button\n              key={t.id}\n              onClick={() => setTab(t.id)}\n              className={`px-4 py-2 rounded-xl text-sm font-medium border ${\n                tab === t.id ? \"bg-black text-white\" : \"bg-white hover:bg-gray-50\"\n              }`}\n            >\n              {t.label}\n            </button>\n          ))}\n        </div>\n\n        <div className=\"space-y-6 pb-12\">\n          {tab === \"entry\" && (\n            <SalesEntry user={me} products={products} onAddSale={addSale} />\n          )}\n\n          {tab === \"mysales\" && (\n            <MySales user={me} entries={entries} products={products} />\n          )}\n\n         {tab === \"leaderboard\" && (\n  <Leaderboard users={users} entries={entries} currentUserId={me.id} />\n)}\n\n          {tab === \"admin\" && me.role === \"admin\" && (\n            <AdminPanel users={users} setUsers={setUsers} products={products} setProducts={setProducts} />\n          )}\n        </div>\n      </div>\n\n      {/* Footer */}\n      <footer className=\"text-center text-xs text-gray-400 py-6\">Prototyp bez serveru • pro produkci napojte Auth + DB</footer>\n    </div>\n  );\n}\n// ===== Žebříček (Leaderboard) =====\nfunction Leaderboard({ users, entries, currentUserId }) {\n  const totals = React.useMemo(() => {\n    const map = new Map();\n    for (const e of entries) map.set(e.userId, (map.get(e.userId) || 0) + e.points);\n    const arr = users.map((u) => ({ user: u, points: map.get(u.id) || 0 }));\n    arr.sort((a, b) => b.points - a.points || a.user.name.localeCompare(b.user.name));\n    return arr;\n  }, [users, entries]);\n\n  return (\n    <div className=\"bg-white rounded-2xl p-5 shadow\">\n      <h2 className=\"text-xl font-semibold mb-4\">Žebříček</h2>\n      <div className=\"overflow-x-auto\">\n        <table className=\"min-w-full text-sm\">\n          <thead>\n            <tr className=\"text-left text-gray-600\">\n              <th className=\"p-2\">#</th>\n              <th className=\"p-2\">Obchodník</th>\n              <th className=\"p-2\">Body</th>\n            </tr>\n          </thead>\n          <tbody>\n            {totals.map((row, idx) => {\n              const isMe = row.user.id === currentUserId;\n              return (\n                <tr\n                  key={row.user.id}\n                  className={`border-t ${isMe ? \"bg-green-50\" : \"\"}`}\n                >\n                  <td className=\"p-2 font-semibold\">{idx + 1}</td>\n                  <td className=\"p-2\">\n                    {row.user.name}\n                    {isMe && (\n                      <span className=\"ml-2 text-xs px-2 py-0.5 rounded-full bg-green-100 text-green-700 align-middle\">\n                        vy jste tady\n                      </span>\n                    )}\n                  </td>\n                  <td className=\"p-2 font-bold\">{row.points}</td>\n                </tr>\n              );\n            })}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n}"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,OAAO,CAAEC,QAAQ,KAAQ,OAAO,CAE3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBACA,KAAM,CAAAC,OAAO,CAAG,CACdC,KAAK,CAAE,qBAAqB,CAC5BC,OAAO,CAAE,uBAAuB,CAChCC,QAAQ,CAAE,wBAAwB,CAClCC,OAAO,CAAE,uBACX,CAAC,CAED;AACA,KAAM,CAAAC,GAAG,CAAGA,CAAA,GAAMC,IAAI,CAACC,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAC,CAACC,KAAK,CAAC,CAAC,CAAC,CAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,CAACH,QAAQ,CAAC,EAAE,CAAC,CAC/E,KAAM,CAAAI,QAAQ,CAAGA,CAAA,GAAM,GAAI,CAAAF,IAAI,CAAC,CAAC,CAACG,WAAW,CAAC,CAAC,CAACJ,KAAK,CAAC,CAAC,CAAE,EAAE,CAAC,CAE5D;AACA,KAAM,CAAAK,aAAa,CAAG,CACpB,CAAEC,EAAE,CAAE,SAAS,CAAEC,IAAI,CAAE,OAAO,CAAEC,KAAK,CAAE,gBAAgB,CAAEC,IAAI,CAAE,OAAO,CAAEC,QAAQ,CAAE,OAAQ,CAAC,CAC3F,CAAEJ,EAAE,CAAE,OAAO,CAAEC,IAAI,CAAE,WAAW,CAAEC,KAAK,CAAE,oBAAoB,CAAEC,IAAI,CAAE,MAAM,CAAEC,QAAQ,CAAE,KAAM,CAAC,CAC9F,CAAEJ,EAAE,CAAE,OAAO,CAAEC,IAAI,CAAE,cAAc,CAAEC,KAAK,CAAE,uBAAuB,CAAEC,IAAI,CAAE,MAAM,CAAEC,QAAQ,CAAE,OAAQ,CAAC,CACvG,CAED,KAAM,CAAAC,gBAAgB,CAAG,CACvB,CAAEL,EAAE,CAAE,YAAY,CAAEC,IAAI,CAAE,UAAU,CAAEK,UAAU,CAAE,CAAE,CAAC,CACrD,CAAEN,EAAE,CAAE,WAAW,CAAEC,IAAI,CAAE,SAAS,CAAEK,UAAU,CAAE,EAAG,CAAC,CACpD,CAAEN,EAAE,CAAE,cAAc,CAAEC,IAAI,CAAE,YAAY,CAAEK,UAAU,CAAE,EAAG,CAAC,CAC1D,CAAEN,EAAE,CAAE,YAAY,CAAEC,IAAI,CAAE,UAAU,CAAEK,UAAU,CAAE,CAAE,CAAC,CACtD,CAED;AACA,QAAS,CAAAC,KAAKA,CAAAC,IAAA,CAAc,IAAb,CAAEC,OAAQ,CAAC,CAAAD,IAAA,CACxB,KAAM,CAACN,KAAK,CAAEQ,QAAQ,CAAC,CAAG9B,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACwB,QAAQ,CAAEO,WAAW,CAAC,CAAG/B,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACgC,KAAK,CAAEC,QAAQ,CAAC,CAAGjC,QAAQ,CAAC,EAAE,CAAC,CAEtC,KAAM,CAAAkC,YAAY,CAAIC,CAAC,EAAK,CAC1BA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClB,KAAM,CAAAC,KAAK,CAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAACpC,OAAO,CAACC,KAAK,CAAC,EAAI,IAAI,CAAC,CACrE,KAAM,CAAAoC,CAAC,CAAGL,KAAK,CAACM,IAAI,CACjBC,CAAC,EAAKA,CAAC,CAACtB,KAAK,CAACuB,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,GAAKxB,KAAK,CAACuB,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,EAAIF,CAAC,CAACpB,QAAQ,GAAKA,QACvF,CAAC,CACD,GAAI,CAACkB,CAAC,CAAE,CACNT,QAAQ,CAAC,8BAA8B,CAAC,CACxC,OACF,CACAO,YAAY,CAACO,OAAO,CAAC1C,OAAO,CAACI,OAAO,CAAE6B,IAAI,CAACU,SAAS,CAAC,CAAEC,MAAM,CAAEP,CAAC,CAACtB,EAAG,CAAC,CAAC,CAAC,CACvES,OAAO,CAACa,CAAC,CAAC,CACZ,CAAC,CAED,mBACExC,IAAA,QAAKgD,SAAS,CAAC,8DAA8D,CAAAC,QAAA,cAC3E/C,KAAA,QAAK8C,SAAS,CAAC,oDAAoD,CAAAC,QAAA,eACjEjD,IAAA,OAAIgD,SAAS,CAAC,yBAAyB,CAAAC,QAAA,CAAC,4BAAgB,CAAI,CAAC,cAC7DjD,IAAA,MAAGgD,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAC,sDAAoC,CAAG,CAAC,cAC1E/C,KAAA,SAAMgD,QAAQ,CAAElB,YAAa,CAACgB,SAAS,CAAC,WAAW,CAAAC,QAAA,eACjD/C,KAAA,QAAA+C,QAAA,eACEjD,IAAA,UAAOgD,SAAS,CAAC,gCAAgC,CAAAC,QAAA,CAAC,aAAM,CAAO,CAAC,cAChEjD,IAAA,UACEmD,IAAI,CAAC,OAAO,CACZH,SAAS,CAAC,kEAAkE,CAC5EI,KAAK,CAAEhC,KAAM,CACbiC,QAAQ,CAAGpB,CAAC,EAAKL,QAAQ,CAACK,CAAC,CAACqB,MAAM,CAACF,KAAK,CAAE,CAC1CG,QAAQ,MACT,CAAC,EACC,CAAC,cACNrD,KAAA,QAAA+C,QAAA,eACEjD,IAAA,UAAOgD,SAAS,CAAC,gCAAgC,CAAAC,QAAA,CAAC,OAAK,CAAO,CAAC,cAC/DjD,IAAA,UACEmD,IAAI,CAAC,UAAU,CACfH,SAAS,CAAC,kEAAkE,CAC5EI,KAAK,CAAE9B,QAAS,CAChB+B,QAAQ,CAAGpB,CAAC,EAAKJ,WAAW,CAACI,CAAC,CAACqB,MAAM,CAACF,KAAK,CAAE,CAC7CG,QAAQ,MACT,CAAC,EACC,CAAC,CACLzB,KAAK,eAAI9B,IAAA,MAAGgD,SAAS,CAAC,sBAAsB,CAAAC,QAAA,CAAEnB,KAAK,CAAI,CAAC,cACzD9B,IAAA,WACEmD,IAAI,CAAC,QAAQ,CACbH,SAAS,CAAC,2EAA2E,CAAAC,QAAA,CACtF,sBAED,CAAQ,CAAC,EACL,CAAC,cACPjD,IAAA,MAAGgD,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,oGAA0F,CAAG,CAAC,EACrI,CAAC,CACH,CAAC,CAEV,CAEA;AACA,QAAS,CAAAO,UAAUA,CAAAC,KAAA,CAAgC,KAAAC,UAAA,IAA/B,CAAEC,IAAI,CAAEC,QAAQ,CAAEC,SAAU,CAAC,CAAAJ,KAAA,CAC/C,KAAM,CAACK,SAAS,CAAEC,YAAY,CAAC,CAAGjE,QAAQ,CAAC,EAAA4D,UAAA,CAAAE,QAAQ,CAAC,CAAC,CAAC,UAAAF,UAAA,iBAAXA,UAAA,CAAaxC,EAAE,GAAI,EAAE,CAAC,CACjE,KAAM,CAAC8C,QAAQ,CAAEC,WAAW,CAAC,CAAGnE,QAAQ,CAAC,CAAC,CAAC,CAC3C,KAAM,CAACoE,IAAI,CAAEC,OAAO,CAAC,CAAGrE,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAACsE,IAAI,CAAEC,OAAO,CAAC,CAAGvE,QAAQ,CAACiB,QAAQ,CAAC,CAAC,CAAC,CAE5C,KAAM,CAAAuD,QAAQ,CAAGzE,OAAO,CAAC,IAAM+D,QAAQ,CAACnB,IAAI,CAAE8B,CAAC,EAAKA,CAAC,CAACrD,EAAE,GAAK4C,SAAS,CAAC,CAAE,CAACF,QAAQ,CAAEE,SAAS,CAAC,CAAC,CAC/F,KAAM,CAAAU,cAAc,CAAG3E,OAAO,CAAC,IAAOyE,QAAQ,CAAGA,QAAQ,CAAC9C,UAAU,EAAIiD,MAAM,CAACT,QAAQ,CAAC,EAAI,CAAC,CAAC,CAAG,CAAE,CAAE,CAACM,QAAQ,CAAEN,QAAQ,CAAC,CAAC,CAE1H,KAAM,CAAAU,MAAM,CAAIzC,CAAC,EAAK,CACpBA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClB,GAAI,CAACoC,QAAQ,CAAE,OACfT,SAAS,CAAC,CAAEC,SAAS,CAAEE,QAAQ,CAAES,MAAM,CAACT,QAAQ,CAAC,CAAEI,IAAI,CAAEF,IAAI,CAAES,MAAM,CAAEH,cAAe,CAAC,CAAC,CACxFP,WAAW,CAAC,CAAC,CAAC,CACdE,OAAO,CAAC,EAAE,CAAC,CACb,CAAC,CAED,mBACEjE,KAAA,QAAK8C,SAAS,CAAC,iCAAiC,CAAAC,QAAA,eAC9CjD,IAAA,OAAIgD,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,cAAY,CAAI,CAAC,cAC5D/C,KAAA,SAAMgD,QAAQ,CAAEwB,MAAO,CAAC1B,SAAS,CAAC,2BAA2B,CAAAC,QAAA,eAC3D/C,KAAA,QAAA+C,QAAA,eACEjD,IAAA,UAAOgD,SAAS,CAAC,gCAAgC,CAAAC,QAAA,CAAC,SAAO,CAAO,CAAC,cACjEjD,IAAA,WACEgD,SAAS,CAAC,oCAAoC,CAC9CI,KAAK,CAAEU,SAAU,CACjBT,QAAQ,CAAGpB,CAAC,EAAK8B,YAAY,CAAC9B,CAAC,CAACqB,MAAM,CAACF,KAAK,CAAE,CAAAH,QAAA,CAE7CW,QAAQ,CAACgB,GAAG,CAAEL,CAAC,eACdrE,KAAA,WAAmBkD,KAAK,CAAEmB,CAAC,CAACrD,EAAG,CAAA+B,QAAA,EAC5BsB,CAAC,CAACpD,IAAI,CAAC,KAAG,CAACoD,CAAC,CAAC/C,UAAU,CAAC,MAC3B,GAFa+C,CAAC,CAACrD,EAEP,CACT,CAAC,CACI,CAAC,EACN,CAAC,cACNhB,KAAA,QAAA+C,QAAA,eACEjD,IAAA,UAAOgD,SAAS,CAAC,gCAAgC,CAAAC,QAAA,CAAC,OAAK,CAAO,CAAC,cAC/DjD,IAAA,UACEmD,IAAI,CAAC,MAAM,CACXH,SAAS,CAAC,oCAAoC,CAC9CI,KAAK,CAAEgB,IAAK,CACZf,QAAQ,CAAGpB,CAAC,EAAKoC,OAAO,CAACpC,CAAC,CAACqB,MAAM,CAACF,KAAK,CAAE,CAC1C,CAAC,EACC,CAAC,cACNlD,KAAA,QAAA+C,QAAA,eACEjD,IAAA,UAAOgD,SAAS,CAAC,gCAAgC,CAAAC,QAAA,CAAC,sBAAU,CAAO,CAAC,cACpEjD,IAAA,UACEmD,IAAI,CAAC,QAAQ,CACb0B,GAAG,CAAE,CAAE,CACP7B,SAAS,CAAC,oCAAoC,CAC9CI,KAAK,CAAEY,QAAS,CAChBX,QAAQ,CAAGpB,CAAC,EAAKgC,WAAW,CAAChC,CAAC,CAACqB,MAAM,CAACF,KAAK,CAAE,CAC9C,CAAC,EACC,CAAC,cACNlD,KAAA,QAAA+C,QAAA,eACEjD,IAAA,UAAOgD,SAAS,CAAC,gCAAgC,CAAAC,QAAA,CAAC,aAAQ,CAAO,CAAC,cAClEjD,IAAA,UACEmD,IAAI,CAAC,MAAM,CACX2B,WAAW,CAAC,gDAA2B,CACvC9B,SAAS,CAAC,oCAAoC,CAC9CI,KAAK,CAAEc,IAAK,CACZb,QAAQ,CAAGpB,CAAC,EAAKkC,OAAO,CAAClC,CAAC,CAACqB,MAAM,CAACF,KAAK,CAAE,CAC1C,CAAC,EACC,CAAC,cACNlD,KAAA,QAAK8C,SAAS,CAAC,iFAAiF,CAAAC,QAAA,eAC9FjD,IAAA,SAAMgD,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,6BAAc,CAAM,CAAC,cAC7D/C,KAAA,SAAM8C,SAAS,CAAC,mBAAmB,CAAAC,QAAA,EAAEuB,cAAc,CAAC,IAAE,EAAM,CAAC,EAC1D,CAAC,cACNxE,IAAA,QAAKgD,SAAS,CAAC,eAAe,CAAAC,QAAA,cAC5BjD,IAAA,WAAQgD,SAAS,CAAC,0FAA0F,CAAAC,QAAA,CAAC,oBAE7G,CAAQ,CAAC,CACN,CAAC,EACF,CAAC,EACJ,CAAC,CAEV,CAEA;AACA,QAAS,CAAA8B,OAAOA,CAAAC,KAAA,CAA8B,IAA7B,CAAErB,IAAI,CAAEsB,OAAO,CAAErB,QAAS,CAAC,CAAAoB,KAAA,CAC1C,KAAM,CAAAE,EAAE,CAAGD,OAAO,CAACE,MAAM,CAAElD,CAAC,EAAKA,CAAC,CAACc,MAAM,GAAKY,IAAI,CAACzC,EAAE,CAAC,CAACkE,IAAI,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAKA,CAAC,CAACC,SAAS,CAAGF,CAAC,CAACE,SAAS,CAAC,CAChG,KAAM,CAAAC,UAAU,CAAGC,MAAM,CAACC,WAAW,CAAC9B,QAAQ,CAACgB,GAAG,CAAEL,CAAC,EAAK,CAACA,CAAC,CAACrD,EAAE,CAAEqD,CAAC,CAAC,CAAC,CAAC,CAErE,mBACErE,KAAA,QAAK8C,SAAS,CAAC,iCAAiC,CAAAC,QAAA,eAC9CjD,IAAA,OAAIgD,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,cAAY,CAAI,CAAC,cAC5DjD,IAAA,QAAKgD,SAAS,CAAC,iBAAiB,CAAAC,QAAA,cAC9B/C,KAAA,UAAO8C,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eACnCjD,IAAA,UAAAiD,QAAA,cACE/C,KAAA,OAAI8C,SAAS,CAAC,yBAAyB,CAAAC,QAAA,eACrCjD,IAAA,OAAIgD,SAAS,CAAC,KAAK,CAAAC,QAAA,CAAC,OAAK,CAAI,CAAC,cAC9BjD,IAAA,OAAIgD,SAAS,CAAC,KAAK,CAAAC,QAAA,CAAC,SAAO,CAAI,CAAC,cAChCjD,IAAA,OAAIgD,SAAS,CAAC,KAAK,CAAAC,QAAA,CAAC,IAAE,CAAI,CAAC,cAC3BjD,IAAA,OAAIgD,SAAS,CAAC,KAAK,CAAAC,QAAA,CAAC,aAAQ,CAAI,CAAC,cACjCjD,IAAA,OAAIgD,SAAS,CAAC,KAAK,CAAAC,QAAA,CAAC,MAAI,CAAI,CAAC,EAC3B,CAAC,CACA,CAAC,cACR/C,KAAA,UAAA+C,QAAA,EACGiC,EAAE,CAACN,GAAG,CAAE3C,CAAC,OAAA0D,qBAAA,oBACRzF,KAAA,OAAe8C,SAAS,CAAC,UAAU,CAAAC,QAAA,eACjCjD,IAAA,OAAIgD,SAAS,CAAC,KAAK,CAAAC,QAAA,CAAEhB,CAAC,CAACmC,IAAI,CAAK,CAAC,cACjCpE,IAAA,OAAIgD,SAAS,CAAC,KAAK,CAAAC,QAAA,CAAE,EAAA0C,qBAAA,CAAAH,UAAU,CAACvD,CAAC,CAAC6B,SAAS,CAAC,UAAA6B,qBAAA,iBAAvBA,qBAAA,CAAyBxE,IAAI,GAAIc,CAAC,CAAC6B,SAAS,CAAK,CAAC,cACvE9D,IAAA,OAAIgD,SAAS,CAAC,KAAK,CAAAC,QAAA,CAAEhB,CAAC,CAAC+B,QAAQ,CAAK,CAAC,cACrChE,IAAA,OAAIgD,SAAS,CAAC,KAAK,CAAAC,QAAA,CAAEhB,CAAC,CAACiC,IAAI,CAAK,CAAC,cACjClE,IAAA,OAAIgD,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAAEhB,CAAC,CAAC0C,MAAM,CAAK,CAAC,GAL1C1C,CAAC,CAACf,EAMP,CAAC,EACN,CAAC,CACDgE,EAAE,CAACU,MAAM,GAAK,CAAC,eACd5F,IAAA,OAAAiD,QAAA,cACEjD,IAAA,OAAIgD,SAAS,CAAC,mBAAmB,CAAC6C,OAAO,CAAE,CAAE,CAAA5C,QAAA,CAAC,uCAAoB,CAAI,CAAC,CACrE,CACL,EACI,CAAC,EACH,CAAC,CACL,CAAC,EACH,CAAC,CAEV,CAEA;AACA,QAAS,CAAA6C,QAAQA,CAACC,IAAI,CAAE,CACtB,KAAM,CAAAC,KAAK,CAAGD,IAAI,CAACpD,IAAI,CAAC,CAAC,CAACsD,KAAK,CAAC,OAAO,CAAC,CACxC,KAAM,CAAAC,OAAO,CAAGF,KAAK,CAACG,KAAK,CAAC,CAAC,CAACF,KAAK,CAAC,GAAG,CAAC,CAACrB,GAAG,CAACwB,CAAC,EAAIA,CAAC,CAACzD,IAAI,CAAC,CAAC,CAAC,CAC3D,MAAO,CAAAqD,KAAK,CAACpB,GAAG,CAACyB,IAAI,EAAI,CACvB,KAAM,CAAAC,IAAI,CAAGD,IAAI,CAACJ,KAAK,CAAC,GAAG,CAAC,CAC5B,KAAM,CAAAM,GAAG,CAAG,CAAC,CAAC,CACdL,OAAO,CAACM,OAAO,CAAC,CAACJ,CAAC,CAAEK,CAAC,GAAK,CAAEF,GAAG,CAACH,CAAC,CAAC,CAAG,CAACE,IAAI,CAACG,CAAC,CAAC,EAAI,EAAE,EAAE9D,IAAI,CAAC,CAAC,CAAE,CAAC,CAAC,CAC/D,MAAO,CAAA4D,GAAG,CACZ,CAAC,CAAC,CACJ,CACA,QAAS,CAAAG,YAAYA,CAACC,QAAQ,CAAEC,IAAI,CAAE,CACpC,KAAM,CAAAC,IAAI,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC1E,IAAI,CAACU,SAAS,CAAC8D,IAAI,CAAE,IAAI,CAAE,CAAC,CAAC,CAAC,CAAE,CAAEzD,IAAI,CAAE,kBAAmB,CAAC,CAAC,CACpF,KAAM,CAAA4D,GAAG,CAAGC,GAAG,CAACC,eAAe,CAACJ,IAAI,CAAC,CACrC,KAAM,CAAAxB,CAAC,CAAG6B,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC,CACrC9B,CAAC,CAAC+B,IAAI,CAAGL,GAAG,CAAE1B,CAAC,CAACgC,QAAQ,CAAGV,QAAQ,CAAEtB,CAAC,CAACiC,KAAK,CAAC,CAAC,CAC9CN,GAAG,CAACO,eAAe,CAACR,GAAG,CAAC,CAC1B,CACA,QAAS,CAAAS,KAAKA,CAACC,GAAG,CAAEvB,OAAO,CAAE,CAC3B,KAAM,CAAAwB,IAAI,CAAGxB,OAAO,CAACyB,IAAI,CAAC,GAAG,CAAC,CAC9B,KAAM,CAAAC,IAAI,CAAGH,GAAG,CAAC7C,GAAG,CAACiD,CAAC,EAAI3B,OAAO,CAACtB,GAAG,CAACwB,CAAC,OAAA0B,IAAA,QAAAA,IAAA,CAAKD,CAAC,CAACzB,CAAC,CAAC,UAAA0B,IAAA,UAAAA,IAAA,CAAI,EAAE,EAAC,CAAC,CAACH,IAAI,CAAC,GAAG,CAAC,CAAC,CAACA,IAAI,CAAC,IAAI,CAAC,CAC9E,MAAO,CAAAD,IAAI,CAAG,IAAI,CAAGE,IAAI,CAC3B,CACA,QAAS,CAAAG,WAAWA,CAACpB,QAAQ,CAAEC,IAAI,CAAEV,OAAO,CAAE,CAC5C,KAAM,CAAAW,IAAI,CAAG,GAAI,CAAAC,IAAI,CAAC,CAACU,KAAK,CAACZ,IAAI,CAAEV,OAAO,CAAC,CAAC,CAAE,CAAE/C,IAAI,CAAE,yBAA0B,CAAC,CAAC,CAClF,KAAM,CAAA4D,GAAG,CAAGC,GAAG,CAACC,eAAe,CAACJ,IAAI,CAAC,CACrC,KAAM,CAAAxB,CAAC,CAAG6B,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC,CACrC9B,CAAC,CAAC+B,IAAI,CAAGL,GAAG,CAAE1B,CAAC,CAACgC,QAAQ,CAAGV,QAAQ,CAAEtB,CAAC,CAACiC,KAAK,CAAC,CAAC,CAC9CN,GAAG,CAACO,eAAe,CAACR,GAAG,CAAC,CAC1B,CAEA;AACA,QAAS,CAAAiB,UAAUA,CAAAC,KAAA,CAA6C,IAA5C,CAAE9F,KAAK,CAAE+F,QAAQ,CAAEtE,QAAQ,CAAEuE,WAAY,CAAC,CAAAF,KAAA,CAC5D;AACA,KAAM,CAACG,KAAK,CAAEC,QAAQ,CAAC,CAAGvI,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACwI,MAAM,CAAEC,SAAS,CAAC,CAAGzI,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAAC0I,KAAK,CAAEC,QAAQ,CAAC,CAAG3I,QAAQ,CAAC,EAAE,CAAC,CAEtC;AACA,KAAM,CAAC4I,KAAK,CAAEC,QAAQ,CAAC,CAAG7I,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAAC8I,OAAO,CAAEC,UAAU,CAAC,CAAG/I,QAAQ,CAAC,EAAE,CAAC,CAE1C;AACA,KAAM,CAAAgJ,mBAAmB,CAAG,KAAO,CAAAC,IAAI,EAAK,CAC1C,KAAM,CAAAhD,IAAI,CAAG,KAAM,CAAAgD,IAAI,CAAChD,IAAI,CAAC,CAAC,CAC9B,GAAI,CAAA0B,GAAG,CACP,GAAIsB,IAAI,CAAC5H,IAAI,CAAC6H,QAAQ,CAAC,OAAO,CAAC,CAAE,CAC/BvB,GAAG,CAAGrF,IAAI,CAACC,KAAK,CAAC0D,IAAI,CAAC,CACxB,CAAC,IAAM,CACL0B,GAAG,CAAG3B,QAAQ,CAACC,IAAI,CAAC,CACtB,CACA;AACA,KAAM,CAAAkD,OAAO,CAAGxB,GAAG,CAAC7C,GAAG,CAAEsE,CAAC,OAAAC,KAAA,OAAM,CAC9BjI,EAAE,CAAE,EAAAiI,KAAA,CAAAD,CAAC,CAAChI,EAAE,UAAAiI,KAAA,iBAAJA,KAAA,CAAMxG,IAAI,CAAC,CAAC,GAAInC,GAAG,CAAC,CAAC,CACzBW,IAAI,CAAE,CAAC+H,CAAC,CAAC/H,IAAI,EAAI,EAAE,EAAEwB,IAAI,CAAC,CAAC,CAC3BvB,KAAK,CAAE,CAAC8H,CAAC,CAAC9H,KAAK,EAAI,EAAE,EAAEuB,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAC3CvB,IAAI,CAAE,CAAC6H,CAAC,CAAC7H,IAAI,EAAI,MAAM,EAAEsB,IAAI,CAAC,CAAC,CAC/BrB,QAAQ,CAAE,CAAC4H,CAAC,CAAC5H,QAAQ,EAAI,EAAE,EAAEqB,IAAI,CAAC,CACpC,CAAC,EAAC,CAAC,CAACwC,MAAM,CAACzC,CAAC,EAAIA,CAAC,CAACvB,IAAI,EAAIuB,CAAC,CAACtB,KAAK,EAAIsB,CAAC,CAACpB,QAAQ,CAAC,CAEhD4G,QAAQ,CAAEkB,IAAI,EAAK,CACjB,KAAM,CAAAC,OAAO,CAAG,GAAI,CAAAC,GAAG,CAACF,IAAI,CAACxE,GAAG,CAACpC,CAAC,EAAI,CAACA,CAAC,CAACpB,KAAK,CAACwB,WAAW,CAAC,CAAC,CAAEJ,CAAC,CAAC,CAAC,CAAC,CAClEyG,OAAO,CAACzC,OAAO,CAAChE,CAAC,EAAI,CAAE6G,OAAO,CAACE,GAAG,CAAC/G,CAAC,CAACpB,KAAK,CAACwB,WAAW,CAAC,CAAC,CAAEJ,CAAC,CAAC,CAAE,CAAC,CAAC,CAChE,KAAM,CAAAgH,IAAI,CAAGC,KAAK,CAACC,IAAI,CAACL,OAAO,CAACM,MAAM,CAAC,CAAC,CAAC,CACzCrH,YAAY,CAACO,OAAO,CAAC1C,OAAO,CAACC,KAAK,CAAEgC,IAAI,CAACU,SAAS,CAAC0G,IAAI,CAAC,CAAC,CACzD,MAAO,CAAAA,IAAI,CACb,CAAC,CAAC,CACJ,CAAC,CAED,KAAM,CAAAI,sBAAsB,CAAG,KAAO,CAAAb,IAAI,EAAK,CAC7C,KAAM,CAAAhD,IAAI,CAAG,KAAM,CAAAgD,IAAI,CAAChD,IAAI,CAAC,CAAC,CAC9B,GAAI,CAAA0B,GAAG,CACP,GAAIsB,IAAI,CAAC5H,IAAI,CAAC6H,QAAQ,CAAC,OAAO,CAAC,CAAE,CAC/BvB,GAAG,CAAGrF,IAAI,CAACC,KAAK,CAAC0D,IAAI,CAAC,CACxB,CAAC,IAAM,CACL0B,GAAG,CAAG3B,QAAQ,CAACC,IAAI,CAAC,CACtB,CACA;AACA,KAAM,CAAAkD,OAAO,CAAGxB,GAAG,CAAC7C,GAAG,CAAEsE,CAAC,OAAAW,MAAA,OAAM,CAC9B3I,EAAE,CAAE,EAAA2I,MAAA,CAAAX,CAAC,CAAChI,EAAE,UAAA2I,MAAA,iBAAJA,MAAA,CAAMlH,IAAI,CAAC,CAAC,GAAInC,GAAG,CAAC,CAAC,CACzBW,IAAI,CAAE,CAAC+H,CAAC,CAAC/H,IAAI,EAAI,EAAE,EAAEwB,IAAI,CAAC,CAAC,CAC3BnB,UAAU,CAAEiD,MAAM,CAACyE,CAAC,CAAC1H,UAAU,EAAI0H,CAAC,CAACvE,MAAM,EAAI,CAAC,CAAC,EAAI,CACvD,CAAC,EAAC,CAAC,CAACQ,MAAM,CAACzC,CAAC,EAAIA,CAAC,CAACvB,IAAI,CAAC,CAEvBgH,WAAW,CAAEiB,IAAI,EAAK,CACpB,KAAM,CAAAU,MAAM,CAAG,GAAI,CAAAR,GAAG,CAACF,IAAI,CAACxE,GAAG,CAACL,CAAC,EAAI,CAACA,CAAC,CAACpD,IAAI,CAACyB,WAAW,CAAC,CAAC,CAAE2B,CAAC,CAAC,CAAC,CAAC,CAChE0E,OAAO,CAACzC,OAAO,CAACjC,CAAC,EAAI,CAAEuF,MAAM,CAACP,GAAG,CAAChF,CAAC,CAACpD,IAAI,CAACyB,WAAW,CAAC,CAAC,CAAE2B,CAAC,CAAC,CAAE,CAAC,CAAC,CAC9D,KAAM,CAAAiF,IAAI,CAAGC,KAAK,CAACC,IAAI,CAACI,MAAM,CAACH,MAAM,CAAC,CAAC,CAAC,CACxCrH,YAAY,CAACO,OAAO,CAAC1C,OAAO,CAACG,QAAQ,CAAE8B,IAAI,CAACU,SAAS,CAAC0G,IAAI,CAAC,CAAC,CAC5D,MAAO,CAAAA,IAAI,CACb,CAAC,CAAC,CACJ,CAAC,CAED;AACA,KAAM,CAAAO,WAAW,CAAGA,CAAA,GAAMrD,YAAY,CAAC,YAAY,CAAEvE,KAAK,CAAC,CAC3D,KAAM,CAAA6H,cAAc,CAAGA,CAAA,GAAMjC,WAAW,CAAC,WAAW,CAAE5F,KAAK,CAAE,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,CACrG,KAAM,CAAA8H,cAAc,CAAGA,CAAA,GAAMvD,YAAY,CAAC,eAAe,CAAE9C,QAAQ,CAAC,CACpE,KAAM,CAAAsG,iBAAiB,CAAGA,CAAA,GAAMnC,WAAW,CAAC,cAAc,CAAEnE,QAAQ,CAAE,CAAC,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC,CAEjG,KAAM,CAAAuG,OAAO,CAAIlI,CAAC,EAAK,CACrBA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClB,KAAM,CAAAkI,OAAO,CAAG,CAAElJ,EAAE,CAAEV,GAAG,CAAC,CAAC,CAAEW,IAAI,CAAEiH,KAAK,CAACzF,IAAI,CAAC,CAAC,CAAEvB,KAAK,CAAEkH,MAAM,CAAC3F,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAAEvB,IAAI,CAAE,MAAM,CAAEC,QAAQ,CAAEkH,KAAM,CAAC,CACpH,GAAI,CAAC4B,OAAO,CAACjJ,IAAI,EAAI,CAACiJ,OAAO,CAAChJ,KAAK,EAAI,CAACgJ,OAAO,CAAC9I,QAAQ,CAAE,OAC1D4G,QAAQ,CAAEkB,IAAI,EAAK,CACjB,KAAM,CAAAI,IAAI,CAAG,CAAC,GAAGJ,IAAI,CAAEgB,OAAO,CAAC,CAC/B9H,YAAY,CAACO,OAAO,CAAC1C,OAAO,CAACC,KAAK,CAAEgC,IAAI,CAACU,SAAS,CAAC0G,IAAI,CAAC,CAAC,CACzD,MAAO,CAAAA,IAAI,CACb,CAAC,CAAC,CACFnB,QAAQ,CAAC,EAAE,CAAC,CAAEE,SAAS,CAAC,EAAE,CAAC,CAAEE,QAAQ,CAAC,EAAE,CAAC,CAC3C,CAAC,CAED,KAAM,CAAA4B,UAAU,CAAIpI,CAAC,EAAK,CACxBA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClB,KAAM,CAAAoI,UAAU,CAAG,CAAEpJ,EAAE,CAAEV,GAAG,CAAC,CAAC,CAAEW,IAAI,CAAEuH,KAAK,CAAC/F,IAAI,CAAC,CAAC,CAAEnB,UAAU,CAAEiD,MAAM,CAACmE,OAAO,CAAC,EAAI,CAAE,CAAC,CACtF,GAAI,CAAC0B,UAAU,CAACnJ,IAAI,CAAE,OACtBgH,WAAW,CAAEiB,IAAI,EAAK,CACpB,KAAM,CAAAI,IAAI,CAAG,CAAC,GAAGJ,IAAI,CAAEkB,UAAU,CAAC,CAClChI,YAAY,CAACO,OAAO,CAAC1C,OAAO,CAACG,QAAQ,CAAE8B,IAAI,CAACU,SAAS,CAAC0G,IAAI,CAAC,CAAC,CAC5D,MAAO,CAAAA,IAAI,CACb,CAAC,CAAC,CACFb,QAAQ,CAAC,EAAE,CAAC,CAAEE,UAAU,CAAC,EAAE,CAAC,CAC9B,CAAC,CAED,KAAM,CAAA0B,UAAU,CAAIrJ,EAAE,EAAK,CACzBgH,QAAQ,CAAEkB,IAAI,EAAK,CACjB,KAAM,CAAAI,IAAI,CAAGJ,IAAI,CAACjE,MAAM,CAAE3C,CAAC,EAAKA,CAAC,CAACtB,EAAE,GAAKA,EAAE,CAAC,CAC5CoB,YAAY,CAACO,OAAO,CAAC1C,OAAO,CAACC,KAAK,CAAEgC,IAAI,CAACU,SAAS,CAAC0G,IAAI,CAAC,CAAC,CACzD,MAAO,CAAAA,IAAI,CACb,CAAC,CAAC,CACJ,CAAC,CAED,KAAM,CAAAgB,aAAa,CAAItJ,EAAE,EAAK,CAC5BiH,WAAW,CAAEiB,IAAI,EAAK,CACpB,KAAM,CAAAI,IAAI,CAAGJ,IAAI,CAACjE,MAAM,CAAEZ,CAAC,EAAKA,CAAC,CAACrD,EAAE,GAAKA,EAAE,CAAC,CAC5CoB,YAAY,CAACO,OAAO,CAAC1C,OAAO,CAACG,QAAQ,CAAE8B,IAAI,CAACU,SAAS,CAAC0G,IAAI,CAAC,CAAC,CAC5D,MAAO,CAAAA,IAAI,CACb,CAAC,CAAC,CACJ,CAAC,CAED,mBACEtJ,KAAA,QAAK8C,SAAS,CAAC,2BAA2B,CAAAC,QAAA,eACxC/C,KAAA,QAAK8C,SAAS,CAAC,iCAAiC,CAAAC,QAAA,eAC9CjD,IAAA,OAAIgD,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,mBAAS,CAAI,CAAC,cACzD/C,KAAA,SAAMgD,QAAQ,CAAEiH,OAAQ,CAACnH,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC9DjD,IAAA,UAAOgD,SAAS,CAAC,6BAA6B,CAAC8B,WAAW,CAAC,gCAAkB,CAAC1B,KAAK,CAAEgF,KAAM,CAAC/E,QAAQ,CAAGpB,CAAC,EAAKoG,QAAQ,CAACpG,CAAC,CAACqB,MAAM,CAACF,KAAK,CAAE,CAAE,CAAC,cACzIpD,IAAA,UAAOgD,SAAS,CAAC,6BAA6B,CAAC8B,WAAW,CAAC,aAAQ,CAAC1B,KAAK,CAAEkF,MAAO,CAACjF,QAAQ,CAAGpB,CAAC,EAAKsG,SAAS,CAACtG,CAAC,CAACqB,MAAM,CAACF,KAAK,CAAE,CAAE,CAAC,cACjIpD,IAAA,UAAOgD,SAAS,CAAC,6BAA6B,CAAC8B,WAAW,CAAC,uBAAe,CAAC1B,KAAK,CAAEoF,KAAM,CAACnF,QAAQ,CAAGpB,CAAC,EAAKwG,QAAQ,CAACxG,CAAC,CAACqB,MAAM,CAACF,KAAK,CAAE,CAAE,CAAC,cACtIpD,IAAA,WAAQgD,SAAS,CAAC,2DAA2D,CAAAC,QAAA,CAAC,4BAAgB,CAAQ,CAAC,EACnG,CAAC,cACP/C,KAAA,QAAK8C,SAAS,CAAC,2BAA2B,CAAAC,QAAA,eACxC/C,KAAA,UAAO8C,SAAS,CAAC,SAAS,CAAAC,QAAA,EAAC,qBAAmB,cAAAjD,IAAA,UAAOmD,IAAI,CAAC,MAAM,CAACsH,MAAM,CAAC,YAAY,CAACpH,QAAQ,CAAGpB,CAAC,EAAIA,CAAC,CAACqB,MAAM,CAACoH,KAAK,CAAC,CAAC,CAAC,EAAI5B,mBAAmB,CAAC7G,CAAC,CAACqB,MAAM,CAACoH,KAAK,CAAC,CAAC,CAAC,CAAE,CAAE,CAAC,EAAO,CAAC,cAC5K1K,IAAA,WAAQ2K,OAAO,CAAEZ,WAAY,CAAC/G,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAAC,aAAW,CAAQ,CAAC,cAChFjD,IAAA,WAAQ2K,OAAO,CAAEX,cAAe,CAAChH,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAAC,YAAU,CAAQ,CAAC,EAC/E,CAAC,cACNjD,IAAA,OAAIgD,SAAS,CAAC,UAAU,CAAAC,QAAA,CACrBd,KAAK,CAACyC,GAAG,CAAEpC,CAAC,eACXtC,KAAA,OAAe8C,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eAC/D/C,KAAA,QAAA+C,QAAA,eACEjD,IAAA,MAAGgD,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAET,CAAC,CAACrB,IAAI,CAAI,CAAC,cACvCjB,KAAA,MAAG8C,SAAS,CAAC,uBAAuB,CAAAC,QAAA,EAAET,CAAC,CAACpB,KAAK,CAAC,gBAAS,CAACoB,CAAC,CAACnB,IAAI,EAAI,CAAC,EAChE,CAAC,CACLmB,CAAC,CAACnB,IAAI,GAAK,OAAO,eACjBrB,IAAA,WAAQ2K,OAAO,CAAEA,CAAA,GAAMJ,UAAU,CAAC/H,CAAC,CAACtB,EAAE,CAAE,CAAC8B,SAAS,CAAC,sCAAsC,CAAAC,QAAA,CAAC,QAAM,CAAQ,CACzG,GAPMT,CAAC,CAACtB,EAQP,CACL,CAAC,CACA,CAAC,EACF,CAAC,cAENhB,KAAA,QAAK8C,SAAS,CAAC,iCAAiC,CAAAC,QAAA,eAC9CjD,IAAA,OAAIgD,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,iBAAe,CAAI,CAAC,cAC/D/C,KAAA,SAAMgD,QAAQ,CAAEmH,UAAW,CAACrH,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eACjEjD,IAAA,UAAOgD,SAAS,CAAC,6BAA6B,CAAC8B,WAAW,CAAC,mBAAgB,CAAC1B,KAAK,CAAEsF,KAAM,CAACrF,QAAQ,CAAGpB,CAAC,EAAK0G,QAAQ,CAAC1G,CAAC,CAACqB,MAAM,CAACF,KAAK,CAAE,CAAE,CAAC,cACvIpD,IAAA,UAAOmD,IAAI,CAAC,QAAQ,CAACH,SAAS,CAAC,6BAA6B,CAAC8B,WAAW,CAAC,aAAa,CAAC1B,KAAK,CAAEwF,OAAQ,CAACvF,QAAQ,CAAGpB,CAAC,EAAK4G,UAAU,CAAC5G,CAAC,CAACqB,MAAM,CAACF,KAAK,CAAE,CAAE,CAAC,cACtJpD,IAAA,WAAQgD,SAAS,CAAC,2DAA2D,CAAAC,QAAA,CAAC,qBAAc,CAAQ,CAAC,EACjG,CAAC,cACP/C,KAAA,QAAK8C,SAAS,CAAC,2BAA2B,CAAAC,QAAA,eACxC/C,KAAA,UAAO8C,SAAS,CAAC,SAAS,CAAAC,QAAA,EAAC,qBAAmB,cAAAjD,IAAA,UAAOmD,IAAI,CAAC,MAAM,CAACsH,MAAM,CAAC,YAAY,CAACpH,QAAQ,CAAGpB,CAAC,EAAIA,CAAC,CAACqB,MAAM,CAACoH,KAAK,CAAC,CAAC,CAAC,EAAId,sBAAsB,CAAC3H,CAAC,CAACqB,MAAM,CAACoH,KAAK,CAAC,CAAC,CAAC,CAAE,CAAE,CAAC,EAAO,CAAC,cAC/K1K,IAAA,WAAQ2K,OAAO,CAAEV,cAAe,CAACjH,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAAC,aAAW,CAAQ,CAAC,cACnFjD,IAAA,WAAQ2K,OAAO,CAAET,iBAAkB,CAAClH,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAAC,YAAU,CAAQ,CAAC,EAClF,CAAC,cACNjD,IAAA,OAAIgD,SAAS,CAAC,UAAU,CAAAC,QAAA,CACrBW,QAAQ,CAACgB,GAAG,CAAEL,CAAC,eACdrE,KAAA,OAAe8C,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eAC/D/C,KAAA,QAAA+C,QAAA,eACEjD,IAAA,MAAGgD,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAEsB,CAAC,CAACpD,IAAI,CAAI,CAAC,cACvCjB,KAAA,MAAG8C,SAAS,CAAC,uBAAuB,CAAAC,QAAA,EAAEsB,CAAC,CAAC/C,UAAU,CAAC,iBAAU,EAAG,CAAC,EAC9D,CAAC,cACNxB,IAAA,WAAQ2K,OAAO,CAAEA,CAAA,GAAMH,aAAa,CAACjG,CAAC,CAACrD,EAAE,CAAE,CAAC8B,SAAS,CAAC,sCAAsC,CAAAC,QAAA,CAAC,QAAM,CAAQ,CAAC,GALrGsB,CAAC,CAACrD,EAMP,CACL,CAAC,CACA,CAAC,EACF,CAAC,EACH,CAAC,CAEV,CAEA;AACA,cAAe,SAAS,CAAA0J,YAAYA,CAAA,CAAG,CACrC,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGhL,QAAQ,CAAC,IAAI,CAAC,CAAE;AAC9C,KAAM,CAACiL,EAAE,CAAEC,KAAK,CAAC,CAAGlL,QAAQ,CAAC,IAAI,CAAC,CAAE;AACpC,KAAM,CAACqC,KAAK,CAAE+F,QAAQ,CAAC,CAAGpI,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAAC8D,QAAQ,CAAEuE,WAAW,CAAC,CAAGrI,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACmF,OAAO,CAAEgG,UAAU,CAAC,CAAGnL,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACoL,GAAG,CAAEC,MAAM,CAAC,CAAGrL,QAAQ,CAAC,aAAa,CAAC,CAE7C;AACAF,SAAS,CAAC,IAAM,CACd,KAAM,CAAAwL,IAAI,CAAG9I,YAAY,CAACC,OAAO,CAACpC,OAAO,CAACC,KAAK,CAAC,CAChD,KAAM,CAAAiL,IAAI,CAAG/I,YAAY,CAACC,OAAO,CAACpC,OAAO,CAACG,QAAQ,CAAC,CACnD,KAAM,CAAAgL,IAAI,CAAGhJ,YAAY,CAACC,OAAO,CAACpC,OAAO,CAACE,OAAO,CAAC,CAClD,GAAI,CAAC+K,IAAI,CAAE9I,YAAY,CAACO,OAAO,CAAC1C,OAAO,CAACC,KAAK,CAAEgC,IAAI,CAACU,SAAS,CAAC7B,aAAa,CAAC,CAAC,CAC7E,GAAI,CAACoK,IAAI,CAAE/I,YAAY,CAACO,OAAO,CAAC1C,OAAO,CAACG,QAAQ,CAAE8B,IAAI,CAACU,SAAS,CAACvB,gBAAgB,CAAC,CAAC,CACnF,GAAI,CAAC+J,IAAI,CAAEhJ,YAAY,CAACO,OAAO,CAAC1C,OAAO,CAACE,OAAO,CAAE+B,IAAI,CAACU,SAAS,CAAC,EAAE,CAAC,CAAC,CAEpEoF,QAAQ,CAAC9F,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAACpC,OAAO,CAACC,KAAK,CAAC,EAAI,IAAI,CAAC,CAAC,CACjE+H,WAAW,CAAC/F,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAACpC,OAAO,CAACG,QAAQ,CAAC,EAAI,IAAI,CAAC,CAAC,CACvE2K,UAAU,CAAC7I,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAACpC,OAAO,CAACE,OAAO,CAAC,EAAI,IAAI,CAAC,CAAC,CAErE,KAAM,CAAAkL,IAAI,CAAGjJ,YAAY,CAACC,OAAO,CAACpC,OAAO,CAACI,OAAO,CAAC,CAClD,GAAIgL,IAAI,CAAET,UAAU,CAAC1I,IAAI,CAACC,KAAK,CAACkJ,IAAI,CAAC,CAAC,CACxC,CAAC,CAAE,EAAE,CAAC,CAEN;AACA3L,SAAS,CAAC,IAAM,CACd,GAAI,CAACiL,OAAO,CAAE,CAAEG,KAAK,CAAC,IAAI,CAAC,CAAE,OAAQ,CACrC,KAAM,CAAAxI,CAAC,CAAGL,KAAK,CAACM,IAAI,CAAEC,CAAC,EAAKA,CAAC,CAACxB,EAAE,GAAK2J,OAAO,CAAC9H,MAAM,CAAC,EAAI,IAAI,CAC5DiI,KAAK,CAACxI,CAAC,CAAC,CACV,CAAC,CAAE,CAACqI,OAAO,CAAE1I,KAAK,CAAC,CAAC,CAEpB,KAAM,CAAAqJ,YAAY,CAAGA,CAAA,GAAM,CACzBlJ,YAAY,CAACmJ,UAAU,CAACtL,OAAO,CAACI,OAAO,CAAC,CACxCuK,UAAU,CAAC,IAAI,CAAC,CAClB,CAAC,CAED,KAAM,CAAAY,OAAO,CAAGC,KAAA,EAAiD,IAAhD,CAAE7H,SAAS,CAAEE,QAAQ,CAAEI,IAAI,CAAEF,IAAI,CAAES,MAAO,CAAC,CAAAgH,KAAA,CAC1D,GAAI,CAACZ,EAAE,CAAE,OACT,KAAM,CAAAa,QAAQ,CAAG,CACf1K,EAAE,CAAEV,GAAG,CAAC,CAAC,CACTuC,MAAM,CAAEgI,EAAE,CAAC7J,EAAE,CACb4C,SAAS,CACTE,QAAQ,CACRI,IAAI,CACJF,IAAI,CACJS,MAAM,CACNY,SAAS,CAAE1E,IAAI,CAACC,GAAG,CAAC,CACtB,CAAC,CACDmK,UAAU,CAAE7B,IAAI,EAAK,CACnB,KAAM,CAAAI,IAAI,CAAG,CAACoC,QAAQ,CAAE,GAAGxC,IAAI,CAAC,CAChC9G,YAAY,CAACO,OAAO,CAAC1C,OAAO,CAACE,OAAO,CAAE+B,IAAI,CAACU,SAAS,CAAC0G,IAAI,CAAC,CAAC,CAC3D,MAAO,CAAAA,IAAI,CACb,CAAC,CAAC,CACF2B,MAAM,CAAC,aAAa,CAAC,CACvB,CAAC,CAED,GAAI,CAACJ,EAAE,CAAE,CACP,mBAAO/K,IAAA,CAACyB,KAAK,EAACE,OAAO,CAAEA,CAAA,GAAMmJ,UAAU,CAAC1I,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAACpC,OAAO,CAACI,OAAO,CAAC,CAAC,CAAE,CAAE,CAAC,CAChG,CAEA,mBACEL,KAAA,QAAK8C,SAAS,CAAC,0BAA0B,CAAAC,QAAA,eAEvCjD,IAAA,WAAQgD,SAAS,CAAC,sCAAsC,CAAAC,QAAA,cACtD/C,KAAA,QAAK8C,SAAS,CAAC,+DAA+D,CAAAC,QAAA,eAC5E/C,KAAA,QAAK8C,SAAS,CAAC,yBAAyB,CAAAC,QAAA,eACtCjD,IAAA,QAAKgD,SAAS,CAAC,mFAAmF,CAAAC,QAAA,CAAC,IAAE,CAAK,CAAC,cAC3GjD,IAAA,OAAIgD,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAC,4BAAa,CAAI,CAAC,EACzC,CAAC,cACN/C,KAAA,QAAK8C,SAAS,CAAC,yBAAyB,CAAAC,QAAA,eACtC/C,KAAA,SAAM8C,SAAS,CAAC,uBAAuB,CAAAC,QAAA,EAAE8H,EAAE,CAAC5J,IAAI,CAAC,IAAE,CAAC4J,EAAE,CAAC1J,IAAI,CAAC,GAAC,EAAM,CAAC,cACpErB,IAAA,WAAQ2K,OAAO,CAAEa,YAAa,CAACxI,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CAAC,aAAQ,CAAQ,CAAC,EAC/F,CAAC,EACH,CAAC,CACA,CAAC,cAGT/C,KAAA,QAAK8C,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1CjD,IAAA,QAAKgD,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CACvC,CACC,CAAE/B,EAAE,CAAE,OAAO,CAAE2K,KAAK,CAAE,cAAe,CAAC,CACtC,CAAE3K,EAAE,CAAE,SAAS,CAAE2K,KAAK,CAAE,cAAe,CAAC,CACxC,CAAE3K,EAAE,CAAE,aAAa,CAAE2K,KAAK,CAAE,UAAW,CAAC,CACxC,IAAId,EAAE,CAAC1J,IAAI,GAAK,OAAO,CAAG,CAAC,CAAEH,EAAE,CAAE,OAAO,CAAE2K,KAAK,CAAE,OAAQ,CAAC,CAAC,CAAG,EAAE,CAAC,CAClE,CAACjH,GAAG,CAAEkH,CAAC,eACN9L,IAAA,WAEE2K,OAAO,CAAEA,CAAA,GAAMQ,MAAM,CAACW,CAAC,CAAC5K,EAAE,CAAE,CAC5B8B,SAAS,oDAAA+I,MAAA,CACPb,GAAG,GAAKY,CAAC,CAAC5K,EAAE,CAAG,qBAAqB,CAAG,2BAA2B,CACjE,CAAA+B,QAAA,CAEF6I,CAAC,CAACD,KAAK,EANHC,CAAC,CAAC5K,EAOD,CACT,CAAC,CACC,CAAC,cAENhB,KAAA,QAAK8C,SAAS,CAAC,iBAAiB,CAAAC,QAAA,EAC7BiI,GAAG,GAAK,OAAO,eACdlL,IAAA,CAACwD,UAAU,EAACG,IAAI,CAAEoH,EAAG,CAACnH,QAAQ,CAAEA,QAAS,CAACC,SAAS,CAAE6H,OAAQ,CAAE,CAChE,CAEAR,GAAG,GAAK,SAAS,eAChBlL,IAAA,CAAC+E,OAAO,EAACpB,IAAI,CAAEoH,EAAG,CAAC9F,OAAO,CAAEA,OAAQ,CAACrB,QAAQ,CAAEA,QAAS,CAAE,CAC3D,CAEDsH,GAAG,GAAK,aAAa,eAC7BlL,IAAA,CAACgM,WAAW,EAAC7J,KAAK,CAAEA,KAAM,CAAC8C,OAAO,CAAEA,OAAQ,CAACgH,aAAa,CAAElB,EAAE,CAAC7J,EAAG,CAAE,CACrE,CAEUgK,GAAG,GAAK,OAAO,EAAIH,EAAE,CAAC1J,IAAI,GAAK,OAAO,eACrCrB,IAAA,CAACgI,UAAU,EAAC7F,KAAK,CAAEA,KAAM,CAAC+F,QAAQ,CAAEA,QAAS,CAACtE,QAAQ,CAAEA,QAAS,CAACuE,WAAW,CAAEA,WAAY,CAAE,CAC9F,EACE,CAAC,EACH,CAAC,cAGNnI,IAAA,WAAQgD,SAAS,CAAC,wCAAwC,CAAAC,QAAA,CAAC,4DAAqD,CAAQ,CAAC,EACtH,CAAC,CAEV,CACA;AACA,QAAS,CAAA+I,WAAWA,CAAAE,KAAA,CAAoC,IAAnC,CAAE/J,KAAK,CAAE8C,OAAO,CAAEgH,aAAc,CAAC,CAAAC,KAAA,CACpD,KAAM,CAAAC,MAAM,CAAGxM,KAAK,CAACE,OAAO,CAAC,IAAM,CACjC,KAAM,CAAA+E,GAAG,CAAG,GAAI,CAAA0E,GAAG,CAAC,CAAC,CACrB,IAAK,KAAM,CAAArH,CAAC,GAAI,CAAAgD,OAAO,CAAEL,GAAG,CAAC2E,GAAG,CAACtH,CAAC,CAACc,MAAM,CAAE,CAAC6B,GAAG,CAACwH,GAAG,CAACnK,CAAC,CAACc,MAAM,CAAC,EAAI,CAAC,EAAId,CAAC,CAAC0C,MAAM,CAAC,CAC/E,KAAM,CAAA8C,GAAG,CAAGtF,KAAK,CAACyC,GAAG,CAAEpC,CAAC,GAAM,CAAEmB,IAAI,CAAEnB,CAAC,CAAEmC,MAAM,CAAEC,GAAG,CAACwH,GAAG,CAAC5J,CAAC,CAACtB,EAAE,CAAC,EAAI,CAAE,CAAC,CAAC,CAAC,CACvEuG,GAAG,CAACrC,IAAI,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAKA,CAAC,CAACX,MAAM,CAAGU,CAAC,CAACV,MAAM,EAAIU,CAAC,CAAC1B,IAAI,CAACxC,IAAI,CAACkL,aAAa,CAAC/G,CAAC,CAAC3B,IAAI,CAACxC,IAAI,CAAC,CAAC,CACjF,MAAO,CAAAsG,GAAG,CACZ,CAAC,CAAE,CAACtF,KAAK,CAAE8C,OAAO,CAAC,CAAC,CAEpB,mBACE/E,KAAA,QAAK8C,SAAS,CAAC,iCAAiC,CAAAC,QAAA,eAC9CjD,IAAA,OAAIgD,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,4BAAQ,CAAI,CAAC,cACxDjD,IAAA,QAAKgD,SAAS,CAAC,iBAAiB,CAAAC,QAAA,cAC9B/C,KAAA,UAAO8C,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eACnCjD,IAAA,UAAAiD,QAAA,cACE/C,KAAA,OAAI8C,SAAS,CAAC,yBAAyB,CAAAC,QAAA,eACrCjD,IAAA,OAAIgD,SAAS,CAAC,KAAK,CAAAC,QAAA,CAAC,GAAC,CAAI,CAAC,cAC1BjD,IAAA,OAAIgD,SAAS,CAAC,KAAK,CAAAC,QAAA,CAAC,cAAS,CAAI,CAAC,cAClCjD,IAAA,OAAIgD,SAAS,CAAC,KAAK,CAAAC,QAAA,CAAC,MAAI,CAAI,CAAC,EAC3B,CAAC,CACA,CAAC,cACRjD,IAAA,UAAAiD,QAAA,CACGkJ,MAAM,CAACvH,GAAG,CAAC,CAAC0H,GAAG,CAAEC,GAAG,GAAK,CACxB,KAAM,CAAAC,IAAI,CAAGF,GAAG,CAAC3I,IAAI,CAACzC,EAAE,GAAK+K,aAAa,CAC1C,mBACE/L,KAAA,OAEE8C,SAAS,aAAA+I,MAAA,CAAcS,IAAI,CAAG,aAAa,CAAG,EAAE,CAAG,CAAAvJ,QAAA,eAEnDjD,IAAA,OAAIgD,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAAEsJ,GAAG,CAAG,CAAC,CAAK,CAAC,cAChDrM,KAAA,OAAI8C,SAAS,CAAC,KAAK,CAAAC,QAAA,EAChBqJ,GAAG,CAAC3I,IAAI,CAACxC,IAAI,CACbqL,IAAI,eACHxM,IAAA,SAAMgD,SAAS,CAAC,gFAAgF,CAAAC,QAAA,CAAC,cAEjG,CAAM,CACP,EACC,CAAC,cACLjD,IAAA,OAAIgD,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAEqJ,GAAG,CAAC3H,MAAM,CAAK,CAAC,GAZ1C2H,GAAG,CAAC3I,IAAI,CAACzC,EAaZ,CAAC,CAET,CAAC,CAAC,CACG,CAAC,EACH,CAAC,CACL,CAAC,EACH,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}